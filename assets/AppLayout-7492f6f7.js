import{R as G,u as We,c as Ve,n as C,m as pe,a as _,t as Oe,g as De,d as Be,b as J,e as xe,i as ee,f as H,h as te,j as K,k as Re,l as Ge,o as _e,r as ve,p as He,s as Ke,q as ze,v as Ze,w as Ue,x as je,y as O,z as n,A as b,B as m,C as be,D as qe,E as Xe,F as Ye,G as U,H as a,I as Qe,J as Je,K as W,L as et,M as D,N as tt,O as oe,P as I,Q as B,S as nt,T as ae,U as st,V as rt}from"./index-a1272f14.js";import it from"./Loader-57169e92.js";function ye(e=G){const t=e===G?We:Ve(e);return function(){const{store:s}=t();return s}}const ot=ye();function at(e=G){const t=e===G?ot:ye(e);return function(){return t().dispatch}}const L=at();var ct=e=>{const t=e.reduce((r,s)=>{const i=C(s).chroma;return i!==void 0&&(r[i]=r[i]||C(s).name),r},{});return r=>t[r]};function lt(e,t={}){const r=e.map(i=>C(i).pc).filter(i=>i);return C.length===0?[]:pt(r,1,t).filter(i=>i.weight).sort((i,o)=>o.weight-i.weight).map(i=>i.name)}var z={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},Z=e=>t=>!!(t&e),ut=Z(z.anyThirds),dt=Z(z.perfectFifth),ht=Z(z.anySeventh),ft=Z(z.nonPerfectFifths);function mt(e){const t=parseInt(e.chroma,2);return ut(t)&&dt(t)&&ht(t)}function gt(e){const t=parseInt(e,2);return ft(t)?e:(t|16).toString(2)}function pt(e,t,r){const s=e[0],i=C(s).chroma,o=ct(e),u=pe(e,!1),c=[];return u.forEach((l,d)=>{const f=r.assumePerfectFifth&&gt(l);_().filter(h=>r.assumePerfectFifth&&mt(h)?h.chroma===f:h.chroma===l).forEach(h=>{const p=h.aliases[0],g=o(d);d!==i?c.push({weight:.5*t,name:`${g}${p}/${s}`}):c.push({weight:1*t,name:`${g}${p}`})})}),c}var Y={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function ne(e){const[t,r,s,i]=Oe(e);return t===""?["",e]:t==="A"&&i==="ug"?["","aug"]:[t+r,s+i]}function M(e){if(e==="")return Y;if(Array.isArray(e)&&e.length===2)return R(e[1],e[0]);{const[t,r]=ne(e),s=R(r,t);return s.empty?R(e):s}}function R(e,t,r){const s=De(e),i=C(t||""),o=C(r||"");if(s.empty||t&&i.empty||r&&o.empty)return Y;const u=Be(i.pc,o.pc),c=s.intervals.indexOf(u)+1;if(!o.empty&&!c)return Y;const l=Array.from(s.intervals);for(let h=1;h<c;h++){const p=l[0][0],g=l[0][1],N=parseInt(p,10)+7;l.push(`${N}${g}`),l.shift()}const d=i.empty?[]:l.map(h=>J(i,h));e=s.aliases.indexOf(e)!==-1?e:s.aliases[0];const f=`${i.empty?"":i.pc}${e}${o.empty||c<=1?"":"/"+o.pc}`,x=`${t?i.pc+" ":""}${s.name}${c>1&&r?" over "+o.pc:""}`;return{...s,name:x,symbol:f,type:s.name,root:o.name,intervals:l,rootDegree:c,tonic:i.name,notes:d}}var xt=xe("Chord.chord","Chord.get",M);function vt(e,t){const[r,s]=ne(e);return r?J(r,t)+s:e}function jt(e){const t=M(e),r=ee(t.chroma);return H().filter(s=>r(s.chroma)).map(s=>s.name)}function bt(e){const t=M(e),r=ee(t.chroma);return _().filter(s=>r(s.chroma)).map(s=>t.tonic+s.aliases[0])}function yt(e){const t=M(e),r=te(t.chroma);return _().filter(s=>r(s.chroma)).map(s=>t.tonic+s.aliases[0])}function Ct(e){const{intervals:t,tonic:r}=M(e),s=K(t,r);return i=>i?s(i>0?i-1:i):""}function St(e){const{intervals:t,tonic:r}=M(e);return K(t,r)}var Q={getChord:R,get:M,detect:lt,chordScales:jt,extended:bt,reduced:yt,tokenize:ne,transpose:vt,degrees:Ct,steps:St,chord:xt},Nt={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Ce(e){if(typeof e!="string")return["",""];const t=e.indexOf(" "),r=C(e.substring(0,t));if(r.empty){const i=C(e);return i.empty?["",e]:[i.name,""]}const s=e.substring(r.name.length+1);return[r.name,s.length?s:""]}var kt=Re;function $(e){const t=Array.isArray(e)?e:Ce(e),r=C(t[0]).name,s=Ge(t[1]);if(s.empty)return Nt;const i=s.name,o=r?s.intervals.map(c=>J(r,c)):[],u=r?r+" "+i:i;return{...s,name:u,type:i,tonic:r,notes:o}}var wt=xe("Scale.scale","Scale.get",$);function Tt(e,t={}){const r=_e(e),s=C(t.tonic??e[0]??""),i=s.chroma;if(i===void 0)return[];const o=r.split("");o[i]="1";const u=ve(i,o).join(""),c=H().find(d=>d.chroma===u),l=[];return c&&l.push(s.name+" "+c.name),t.match==="exact"||Se(u).forEach(d=>{l.push(s.name+" "+d)}),l}function $t(e){const t=$(e),r=te(t.chroma);return _().filter(s=>r(s.chroma)).map(s=>s.aliases[0])}function Se(e){const t=He(e)?e:$(e).chroma,r=ee(t);return H().filter(s=>r(s.chroma)).map(s=>s.name)}function Ft(e){const t=te($(e).chroma);return H().filter(r=>t(r.chroma)).map(r=>r.name)}function Ne(e){const t=e.map(i=>C(i).pc).filter(i=>i),r=t[0],s=Ke(t);return ve(s.indexOf(r),s)}function At(e){const t=$(e);if(t.empty)return[];const r=t.tonic?t.notes:t.intervals;return pe(t.chroma).map((s,i)=>{const o=$(s).name;return o?[r[i],o]:["",""]}).filter(s=>s[0])}function Lt(e){const t=Array.isArray(e)?Ne(e):$(e).notes,r=t.map(s=>C(s).chroma);return s=>{const i=typeof s=="number"?C(Ze(s)):C(s),o=i.height;if(o===void 0)return;const u=o%12,c=r.indexOf(u);if(c!==-1)return Ue(i.name,t[c])}}function Mt(e){const t=Lt(e);return(r,s)=>{const i=C(r).height,o=C(s).height;return i===void 0||o===void 0?[]:ze(i,o).map(t).filter(u=>u)}}function Et(e){const{intervals:t,tonic:r}=$(e),s=K(t,r);return i=>i?s(i>0?i-1:i):""}function It(e){const{intervals:t,tonic:r}=$(e);return K(t,r)}var Pt={degrees:Et,detect:Tt,extended:Se,get:$,modeNames:At,names:kt,rangeOf:Mt,reduced:Ft,scaleChords:$t,scaleNotes:Ne,steps:It,tokenize:Ce,scale:wt};function Wt(e,t){let s=.1+.5*(1-e/t*100/100);var i="";let u=s/100;d(0,0);for(let f=1;f<=99;f++)s-=u,f%2===0?d(f,-s):d(f,s);d(100,0);let c=document.styleSheets[0],l=null;for(let f=0;f<c.cssRules.length;f++)if(c.cssRules[f].name==="dynamicSkew"){l=c.cssRules[f];break}l?l.cssText=`@keyframes stringVibration { ${i} }`:c.insertRule(`@keyframes stringVibration { ${i} }`,c.cssRules.length);function d(f,x){i+=`${f}% {
      transform: skewY(${x}deg);
    }`}}var ke={exports:{}},Vt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ot=Vt,Dt=Ot;function we(){}function Te(){}Te.resetWarningCache=we;var Bt=function(){function e(s,i,o,u,c,l){if(l!==Dt){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Te,resetWarningCache:we};return r.PropTypes=r,r};ke.exports=Bt();var Rt=ke.exports;const V=je(Rt);function Gt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $e=Gt,_t=typeof O=="object"&&O&&O.Object===Object&&O,Ht=_t,Kt=Ht,zt=typeof self=="object"&&self&&self.Object===Object&&self,Zt=Kt||zt||Function("return this")(),Fe=Zt,Ut=Fe,qt=function(){return Ut.Date.now()},Xt=qt,Yt=/\s/;function Qt(e){for(var t=e.length;t--&&Yt.test(e.charAt(t)););return t}var Jt=Qt,en=Jt,tn=/^\s+/;function nn(e){return e&&e.slice(0,en(e)+1).replace(tn,"")}var sn=nn,rn=Fe,on=rn.Symbol,Ae=on,ce=Ae,Le=Object.prototype,an=Le.hasOwnProperty,cn=Le.toString,P=ce?ce.toStringTag:void 0;function ln(e){var t=an.call(e,P),r=e[P];try{e[P]=void 0;var s=!0}catch{}var i=cn.call(e);return s&&(t?e[P]=r:delete e[P]),i}var un=ln,dn=Object.prototype,hn=dn.toString;function fn(e){return hn.call(e)}var mn=fn,le=Ae,gn=un,pn=mn,xn="[object Null]",vn="[object Undefined]",ue=le?le.toStringTag:void 0;function jn(e){return e==null?e===void 0?vn:xn:ue&&ue in Object(e)?gn(e):pn(e)}var bn=jn;function yn(e){return e!=null&&typeof e=="object"}var Cn=yn,Sn=bn,Nn=Cn,kn="[object Symbol]";function wn(e){return typeof e=="symbol"||Nn(e)&&Sn(e)==kn}var Tn=wn,$n=sn,de=$e,Fn=Tn,he=0/0,An=/^[-+]0x[0-9a-f]+$/i,Ln=/^0b[01]+$/i,Mn=/^0o[0-7]+$/i,En=parseInt;function In(e){if(typeof e=="number")return e;if(Fn(e))return he;if(de(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=de(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=$n(e);var r=Ln.test(e);return r||Mn.test(e)?En(e.slice(2),r?2:8):An.test(e)?he:+e}var Pn=In,Wn=$e,q=Xt,fe=Pn,Vn="Expected a function",On=Math.max,Dn=Math.min;function Bn(e,t,r){var s,i,o,u,c,l,d=0,f=!1,x=!1,h=!0;if(typeof e!="function")throw new TypeError(Vn);t=fe(t)||0,Wn(r)&&(f=!!r.leading,x="maxWait"in r,o=x?On(fe(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h);function p(v){var T=s,E=i;return s=i=void 0,d=v,u=e.apply(E,T),u}function g(v){return d=v,c=setTimeout(k,t),f?p(v):u}function N(v){var T=v-l,E=v-d,ie=t-T;return x?Dn(ie,o-E):ie}function w(v){var T=v-l,E=v-d;return l===void 0||T>=t||T<0||x&&E>=o}function k(){var v=q();if(w(v))return F(v);c=setTimeout(k,N(v))}function F(v){return c=void 0,h&&s?p(v):(s=i=void 0,u)}function y(){c!==void 0&&clearTimeout(c),d=0,s=l=i=c=void 0}function j(){return c===void 0?u:F(q())}function S(){var v=q(),T=w(v);if(s=arguments,i=this,l=v,T){if(c===void 0)return g(l);if(x)return clearTimeout(c),c=setTimeout(k,t),p(l)}return c===void 0&&(c=setTimeout(k,t)),u}return S.cancel=y,S.flush=j,S}var Rn=Bn;const me=je(Rn);const Gn=()=>n.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{d:"M12.0355 8.52113C12.4261 8.1306 13.0674 8.12674 13.3881 8.57637C14.0882 9.55788 14.5 10.7592 14.5 12.0567C14.5 13.3541 14.0882 14.5554 13.3881 15.537C13.0674 15.9866 12.4261 15.9827 12.0355 15.5922C11.645 15.2017 11.6586 14.5725 11.9408 14.0978C12.296 13.5002 12.5 12.8023 12.5 12.0567C12.5 11.3111 12.296 10.6131 11.9408 10.0156C11.6586 9.54084 11.645 8.91165 12.0355 8.52113Z",fill:"#000000"}),n.jsx("path",{d:"M14.864 5.69316C15.2545 5.30263 15.8921 5.29976 16.2419 5.72712C17.6532 7.45118 18.5 9.65526 18.5 12.0571C18.5 14.459 17.6532 16.6631 16.2419 18.3871C15.8921 18.8145 15.2545 18.8116 14.864 18.4211C14.4734 18.0306 14.4792 17.4007 14.8183 16.9648C15.8723 15.6098 16.5 13.9068 16.5 12.0571C16.5 10.2075 15.8723 8.50445 14.8183 7.14944C14.4792 6.71351 14.4734 6.08368 14.864 5.69316Z",fill:"#000000"}),n.jsx("path",{d:"M17.6929 2.79322C18.0835 2.40268 18.7197 2.40049 19.0815 2.81776C21.2113 5.2739 22.5002 8.47903 22.5002 11.9852C22.5002 15.5312 21.1818 18.7693 19.0085 21.2361C18.6434 21.6505 18.0073 21.6433 17.6198 21.2497C17.2324 20.8562 17.2409 20.2256 17.6011 19.8069C19.408 17.7063 20.5002 14.9733 20.5002 11.9852C20.5002 9.03126 19.4329 6.32661 17.6628 4.23586C17.306 3.81436 17.3024 3.18373 17.6929 2.79322Z",fill:"#000000"}),n.jsx("path",{d:"M10 16.5858V7.41421C10 6.52331 8.92286 6.07714 8.29289 6.70711L6.29289 8.70711C6.10536 8.89464 5.851 9 5.58579 9H4C3.44772 9 3 9.44772 3 10V14C3 14.5523 3.44772 15 4 15H5.58579C5.851 15 6.10536 15.1054 6.29289 15.2929L8.29289 17.2929C8.92286 17.9229 10 17.4767 10 16.5858Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"})]}),ge=()=>n.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{d:"M13.0355 8.52113C13.4261 8.1306 14.0674 8.12674 14.3881 8.57637C15.0882 9.55788 15.5 10.7592 15.5 12.0567C15.5 13.3541 15.0882 14.5554 14.3881 15.537C14.0674 15.9866 13.4261 15.9827 13.0355 15.5922C12.645 15.2017 12.6586 14.5725 12.9408 14.0978C13.296 13.5002 13.5 12.8023 13.5 12.0567C13.5 11.3111 13.296 10.6131 12.9408 10.0156C12.6586 9.54084 12.645 8.91165 13.0355 8.52113Z",fill:"#000000"}),n.jsx("path",{d:"M15.864 5.69316C16.2545 5.30263 16.8921 5.29976 17.2419 5.72712C18.6532 7.45118 19.5 9.65526 19.5 12.0571C19.5 14.459 18.6532 16.6631 17.2419 18.3871C16.8921 18.8145 16.2545 18.8116 15.864 18.4211C15.4734 18.0306 15.4792 17.4007 15.8183 16.9648C16.8723 15.6098 17.5 13.9068 17.5 12.0571C17.5 10.2075 16.8723 8.50445 15.8183 7.14944C15.4792 6.71351 15.4734 6.08368 15.864 5.69316Z",fill:"#000000"}),n.jsx("path",{d:"M11 16.5858V7.41421C11 6.52331 9.92286 6.07714 9.29289 6.70711L7.29289 8.70711C7.10536 8.89464 6.851 9 6.58579 9H5C4.44772 9 4 9.44772 4 10V14C4 14.5523 4.44772 15 5 15H6.58579C6.851 15 7.10536 15.1054 7.29289 15.2929L9.29289 17.2929C9.92286 17.9229 11 17.4767 11 16.5858Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"})]}),_n=()=>n.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{d:"M15.0355 8.52113C15.4261 8.1306 16.0674 8.12674 16.3881 8.57637C17.0882 9.55788 17.5 10.7592 17.5 12.0567C17.5 13.3541 17.0882 14.5554 16.3881 15.537C16.0674 15.9866 15.4261 15.9827 15.0355 15.5922C14.645 15.2017 14.6586 14.5725 14.9408 14.0978C15.296 13.5002 15.5 12.8023 15.5 12.0567C15.5 11.3111 15.296 10.6131 14.9408 10.0156C14.6586 9.54084 14.645 8.91165 15.0355 8.52113Z",fill:"#000000"}),n.jsx("path",{d:"M13 16.5858V7.41421C13 6.52331 11.9229 6.07714 11.2929 6.70711L9.29289 8.70711C9.10536 8.89464 8.851 9 8.58579 9H7C6.44772 9 6 9.44772 6 10V14C6 14.5523 6.44772 15 7 15H8.58579C8.851 15 9.10536 15.1054 9.29289 15.2929L11.2929 17.2929C11.9229 17.9229 13 17.4767 13 16.5858Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"})]}),Hn=()=>n.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{d:"M11 16.5858V7.41421C11 6.52331 9.92286 6.07714 9.29289 6.70711L7.29289 8.70711C7.10536 8.89464 6.851 9 6.58579 9H5C4.44772 9 4 9.44772 4 10V14C4 14.5523 4.44772 15 5 15H6.58579C6.851 15 7.10536 15.1054 7.29289 15.2929L9.29289 17.2929C9.92286 17.9229 11 17.4767 11 16.5858Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M20 9.5L15 14.5",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M20 14.5L15 9.5",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"})]}),Kn=()=>n.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{d:"M12 16.5858V7.41421C12 6.52331 10.9229 6.07714 10.2929 6.70711L8.29289 8.70711C8.10536 8.89464 7.851 9 7.58579 9H6C5.44772 9 5 9.44772 5 10V14C5 14.5523 5.44772 15 6 15H7.58579C7.851 15 8.10536 15.1054 8.29289 15.2929L10.2929 17.2929C10.9229 17.9229 12 17.4767 12 16.5858Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M16.5361 13.5353V8",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M17.5361 16.598C17.5361 17.1503 17.0884 17.598 16.5361 17.598C15.9838 17.598 15.5361 17.1503 15.5361 16.598C15.5361 16.0457 15.9838 15.598 16.5361 15.598C17.0884 15.598 17.5361 16.0457 17.5361 16.598Z",fill:"#000000"})]});function zn(){return n.jsx("div",{id:"Spinner"})}function Zn(){const e=b.useRef(null),[t,r]=b.useState(!0),[s,i]=b.useState(Kn),[o,u]=b.useState(!1),[c,l]=b.useState(null),[d,f]=b.useState(8),x=m(g=>g.user.soundFile);b.useEffect(()=>{const g=setInterval(()=>{be.state()==="loaded"&&(r(!1),clearInterval(g),i(ge))},50);return()=>{clearInterval(g)}},[x]);function h(){if(!t){c&&clearTimeout(c);const g=setTimeout(()=>{u(!1)},3e3);l(g),u(!o)}}function p(){if(!t){c&&clearTimeout(c);let g=parseInt(e.current.value);f(g),g===0&&i(Hn),g>0&&g<=3&&i(_n),g>3&&g<=7&&i(ge),g>7&&g<=10&&i(Gn);let N=g/10;qe.Howler.volume(N);const w=setTimeout(()=>{u(!1)},2e3);l(w)}}return n.jsxs("div",{id:"VolumeMixer",className:`${o?"expanded":""} ${t?"loadingSound":""}`,children:[n.jsxs("button",{className:"volumeButton",onClick:()=>h(),children:[t?n.jsx(zn,{}):null,s]}),n.jsx("div",{className:"volumeSlider",children:n.jsx("input",{className:"slider",ref:e,type:"range",orient:"vertical",value:d,min:"0",max:"10",onChange:p})})]})}function Un(){return n.jsx("nav",{id:"Navbar",children:n.jsxs("div",{className:"flex-wrapper",children:[n.jsxs("div",{className:"userSettings",children:[n.jsx("button",{children:"Login"}),n.jsx("button",{children:"Projects"})]}),n.jsx(Zn,{})]})})}function X({onClick:e,children:t,className:r,active:s}){return n.jsx("button",{className:`button ${r} ${s?"active":""}`,onClick:e,children:t})}function Me(){const e=Xe.createRef(),t=L(),r=m(o=>o.fretboard.fretCount),s=m(o=>o.fretboard.fretCap);function i(){t(Ye(parseInt(e.current.value)))}return n.jsxs("div",{id:"fretCount-slider",children:[n.jsxs("h4",{children:["Frets: ",r==0?"None":r]}),n.jsx("input",{ref:e,type:"range",value:r,min:"0",max:s,onChange:i})]})}Me.propTypes={activeView:V.string,setActiveView:V.func};function Ee(){const e=L();m(s=>s.ui.currentViewSection1);const t=m(s=>s.musicTheory.key),r=m(s=>s.ui.menus);return n.jsxs("div",{id:"toolbar",children:[n.jsxs("div",{className:"Tonality wrapper",children:[n.jsx("h4",{children:"Key"}),n.jsx("div",{className:"content",children:n.jsxs(X,{className:"keyChangeButton",active:r.keyChange.showing,onClick:()=>e(U("keyChange")),children:[t.tonic," ",t.type==="major"?"Major":"Minor"]})})]}),n.jsxs("div",{className:"instrument wrapper",children:[n.jsx("h4",{children:"Settings"}),n.jsx("div",{className:"content",children:n.jsx(X,{active:r.settings.showing,onClick:()=>e(U("settings")),children:"🛠️"})})]}),n.jsxs("div",{className:"menus wrapper",children:[n.jsx("h4",{children:"Quick menus"}),n.jsx("div",{className:"content",children:n.jsx(X,{active:r.instrument.showing,onClick:()=>e(U("instrument")),children:"🎵"})})]}),n.jsx(Me,{})]})}Ee.propTypes={activeView:V.string,setActiveView:V.func};function qn(e,t,r,s){let i=r.type==="minor"?r.natural.scale:r.scale;if(t==="note"){for(let o of i)if(a.enharmonic(o)===e)return o.includes("b")?o.replace(/b/g,"♭"):o.includes("#")?o.replace(/#/g,"♯"):o;return s==="b"?a.enharmonic(e).replace(/b/g,"♭"):e.replace(/#/g,"♯")}if(t==="degree"){for(let o=0;o<i.length;o++)if(e===i[o])return o+1}else if(t==="interval"){for(let o=0;o<i.length;o++)if(e===i[o])return r.intervals[o]}else if(t==="doReMi"){for(let o=0;o<i.length;o++)if(e===r.scale[o]){if(o===0)return"Do";if(o===1)return"Re";if(o===2)return"Mi";if(o===3)return"Fa";if(o===4)return"So";if(o===5)return"La";if(o===6)return"Ti"}}return e}const Ie=b.memo(function({pitchClass:t,octave:r,noteWidth:s,labelWidth:i,selected:o,highlighted:u,stringNumber:c}){const l=m(h=>h.musicTheory.labelNotes),d=m(h=>h.musicTheory.key),f=m(h=>h.musicTheory.accidental);let x=qn(t,l,d,f);return n.jsx("button",{className:`note ${o?"selected":""} ${u?"highlighted":""}`,"data-pitchclass":t,"data-octave":r,"data-stringnumber":c,style:{minWidth:s,maxWidth:s},children:n.jsx("span",{style:{minWidth:i,maxWidth:i,minHeight:i,maxHeight:i},children:x})})});function Xn({tuning:e,allNotes:t,nutIsFixed:r}){const s=m(o=>o.fretboard.notesLabelWidth),i=m(o=>o.fretboard.fretWidths);return n.jsx("div",{className:`nut ${r?"fixed":""}`,children:e.map((o,u)=>{let c=e.length-u,l=t.filter(x=>x.name===o.name&&x.appearsOnStrings.includes(c))[0],d=i[0],f=l.selectedOnStrings.includes(c);return n.jsx(Ie,{pitchClass:l.pc,octave:l.oct,noteWidth:d,labelWidth:s,selected:f,highlighted:l.highlighted,stringNumber:c},`note${l.name}string${c}`)})})}let A=[{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null}];function Yn(e,t,r,s){let i=t;for(let d=0;d<r;d++)i-=s[d];Wt(i,t);let o=document.getElementsByClassName("stringVisual")[e],u=o.querySelector(".staticPart"),c=o.querySelector(".vibratingPart");A[e].timeout&&clearTimeout(A[e].timeout),c.classList.remove("animate"),c.offsetWidth,u.style.width=`calc(100% - ${i}px)`,c.style.width=`${i}px`,c.classList.add("animate");const l=[...A];l[e].isAnimating=!0,A=l,A[e].timeout=setTimeout(()=>{const d=[...A];d[e].isAnimating=!1,A=d,c.classList.remove("animate")},3e3)}function Qn(e,t,r){let s,i,o=!1,u,c,l=[],d=document.getElementById("Fretboard"),f=document.getElementById("Strings"),x=document.getElementById("FretVisuals"),h=document.getElementById("StringVisuals");d.addEventListener("mousedown",p),d.addEventListener("touchstart",g);function p(y){l=[];let j;d.classList.contains("nutIsFixed")?(j=f.clientWidth!==f.scrollWidth,l.push(f),l.push(x),l.push(h)):(j=d.clientWidth!==d.scrollWidth,l.push(d)),j&&(document.addEventListener("mousemove",N),document.addEventListener("mouseup",k),s=y.pageX-d.offsetLeft,i=l[0].scrollLeft)}function g(y){l=[];let j;d.classList.contains("nutIsFixed")?(j=f.clientWidth!==f.scrollWidth,l.push(f),l.push(x),l.push(h)):(j=d.clientWidth!==d.scrollWidth,l.push(d)),j&&(document.addEventListener("touchmove",w),document.addEventListener("touchend",F),s=y.touches[0].pageX-d.offsetLeft,i=l[0].scrollLeft)}function N(y){if(y.preventDefault(),u=y.pageX-d.offsetLeft,c=u-s,Math.abs(c)>10&&(r(!0),o=!0),o)for(let S=0;S<l.length;S++)l[S].scrollLeft=i-c}function w(y){if(y.preventDefault(),u=y.touches[0].pageX-d.offsetLeft,c=u-s,Math.abs(c)>10&&(r(!0),o=!0),o)for(let S=0;S<l.length;S++)l[S].scrollLeft=i-c}function k(){if(o){let y=l[0].scrollLeft;for(let j=0;j<l.length;j++)e(t(y));o=!1}document.removeEventListener("mouseup",k),document.removeEventListener("mousemove",N)}function F(){if(o){let y=l[0].scrollLeft;for(let j=0;j<l.length;j++)e(t(y));o=!1}document.removeEventListener("touchEnd",F),document.removeEventListener("touchMove",w)}}function Pe(e,t){let r=0;for(let s=0;s<e.length;s++)r+=e[s];return r}function Jn(e,t){return e.filter(s=>s.appearsOnStrings.includes(t))}const es=b.memo(function({notes:t,stringNumber:r}){const s=m(u=>u.fretboard.nutIsFixed),i=m(u=>u.fretboard.notesLabelWidth),o=m(u=>u.fretboard.fretWidths);return n.jsx("div",{className:"string","data-stringnumber":r,children:t.map((u,c)=>{let l=u.selectedOnStrings.includes(r),d=s?o[c+1]:o[c];return n.jsx(Ie,{pitchClass:u.pc,octave:u.oct,noteWidth:d,labelWidth:i,selected:l,highlighted:u.highlighted,stringNumber:r},`note${u.name}string${r}`)})})});function ts({tuning:e,nutIsFixed:t,allNotes:r,fretWidths:s,width:i}){return n.jsx("div",{id:"Strings",style:{height:"145px",left:t?s[0]+"px":"auto",right:t?"unset":"auto",overflow:t?"hidden":"visible",maxWidth:t?i:"100%"},children:e.map((o,u)=>{let c=e.length-u,l=Jn(r,c);return t&&(l=l.slice(1)),n.jsx(es,{notes:l,stringNumber:c},`string${c}`)})})}function ns({style:e,theme:t,tuning:r,fretWidths:s,fretboardWidth:i,nutIsFixed:o,width:u}){let c=Pe(s);return n.jsxs(n.Fragment,{children:[n.jsx("div",{id:"StringVisuals",style:{width:o?i:c},children:r.map((l,d)=>{let f=r.length-d;return n.jsxs("div",{className:"stringVisual",style:{width:o?c:"auto"},children:[n.jsx("span",{className:"staticPart"}),n.jsx("span",{className:"vibratingPart"})]},`stringVisual${f}`)})}),o?n.jsx("div",{className:"nutVisual",style:{minWidth:s[0]+"px"}}):null,n.jsx("div",{id:"FretVisuals",className:`${o?"nutIsFixed":""}`,style:{left:o?s[0]+"px":"auto",right:o?0:"auto"},children:s.map((l,d)=>d===0&&o?null:n.jsxs("div",{className:!o&&d===0?"fretVisual nutVisual":"fretVisual",style:{minWidth:l,maxWidth:o?u:"auto"},children:[n.jsx("span",{className:"fretband"}),[3,5,7,9,15,17,19,21].includes(d)?n.jsx("span",{className:"fretMarker"}):null,[12,24].includes(d)?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"fretMarker"}),n.jsx("span",{className:"fretMarker"})]}):null,[24].includes(d)?n.jsx("span",{className:"fretband"}):null]},`fretVisual${d}`))})]})}function ss(){const[e,t]=b.useState(!1),r=L(),s=m(h=>h.musicTheory.allNotes),i=m(h=>h.musicTheory.markNotes),o=m(h=>h.fretboard.tuning),u=m(h=>h.fretboard.fretWidths),c=m(h=>h.fretboard.nutIsFixed),l=m(h=>h.fretboard.fretboardWidth),d=m(h=>h.fretboard.fretboardStyle),f=m(h=>h.fretboard.fretboardTheme);b.useEffect(()=>{Qn(r,Qe,t)},[r]);function x(h){if(e)t(!1);else{let p=h.target;if(p.parentNode.classList.contains("note")&&(p=p.parentNode),p.classList.contains("note")){let g=p.parentNode,N=p.getAttribute("data-octave"),w=p.getAttribute("data-pitchclass"),k=parseInt(p.getAttribute("data-stringnumber")),F=o.length-k,y=g.querySelectorAll(".note"),j=Array.from(y).indexOf(p),S=a.get(w+N),v=p.classList.contains("selected");i!=="none"&&r(Je({note:S,stringNumber:k,wasSelected:v})),be.playNote(w+N,k);let T=Pe(u);Yn(F,T,j,u)}}}return n.jsxs("div",{id:"Fretboard",className:c?"nutIsFixed":"",style:{width:l,height:145},onClick:x,children:[c?n.jsx(Xn,{tuning:o,allNotes:s,nutIsFixed:c}):null,n.jsx(ts,{tuning:o,nutIsFixed:c,allNotes:s,fretWidths:u,width:l-u[0]}),n.jsx(ns,{style:d,theme:f,tuning:o,fretWidths:u,fretboardWidth:l,nutIsFixed:c,width:l-u[0]})]})}function rs(){let e={username:"Guest",key:W.majorKey("C"),scale:"major",tonality:"todo",accidental:"",allNotes:[{...a.get("C0")},{...a.get("C#0")},{...a.get("D0")},{...a.get("D#0")},{...a.get("E0")},{...a.get("F0")},{...a.get("F#0")},{...a.get("G0")},{...a.get("G#0")},{...a.get("A0")},{...a.get("A#0")},{...a.get("B0")},{...a.get("C1")},{...a.get("C#1")},{...a.get("D1")},{...a.get("D#1")},{...a.get("E1")},{...a.get("F1")},{...a.get("F#1")},{...a.get("G1")},{...a.get("G#1")},{...a.get("A1")},{...a.get("A#1")},{...a.get("B1")},{...a.get("C2")},{...a.get("C#2")},{...a.get("D2")},{...a.get("D#2")},{...a.get("E2")},{...a.get("F2")},{...a.get("F#2")},{...a.get("G2")},{...a.get("G#2")},{...a.get("A2")},{...a.get("A#2")},{...a.get("B2")},{...a.get("C3")},{...a.get("C#3")},{...a.get("D3")},{...a.get("D#3")},{...a.get("E3")},{...a.get("F3")},{...a.get("F#3")},{...a.get("G3")},{...a.get("G#3")},{...a.get("A3")},{...a.get("A#3")},{...a.get("B3")},{...a.get("C4")},{...a.get("C#4")},{...a.get("D4")},{...a.get("D#4")},{...a.get("E4")},{...a.get("F4")},{...a.get("F#4")},{...a.get("G4")},{...a.get("G#4")},{...a.get("A4")},{...a.get("A#4")},{...a.get("B4")},{...a.get("C5")},{...a.get("C#5")},{...a.get("D5")},{...a.get("D#5")},{...a.get("E5")},{...a.get("F5")},{...a.get("F#5")},{...a.get("G5")},{...a.get("G#5")},{...a.get("A5")},{...a.get("A#5")},{...a.get("B5")},{...a.get("C6")},{...a.get("C#6")},{...a.get("D6")},{...a.get("D#6")},{...a.get("E6")},{...a.get("F6")},{...a.get("F#6")},{...a.get("G6")},{...a.get("G#6")},{...a.get("A6")},{...a.get("A#6")},{...a.get("B6")},{...a.get("C7")},{...a.get("C#7")},{...a.get("D7")},{...a.get("D#7")},{...a.get("E7")},{...a.get("F7")},{...a.get("F#7")},{...a.get("G7")},{...a.get("G#7")},{...a.get("A7")},{...a.get("A#7")},{...a.get("B7")},{...a.get("C8")},{...a.get("C#8")},{...a.get("D8")},{...a.get("D#8")},{...a.get("E8")},{...a.get("F8")},{...a.get("F#8")},{...a.get("G8")},{...a.get("G#8")},{...a.get("A8")},{...a.get("A#8")},{...a.get("B8")}],instrument:"Fretboard",nutIsFixed:!1,soundFile:"jazzBass.mp3",instrumentStyle:"default",instrumentTheme:"default",coloredNotes:!1,tuning:[a.get("G2"),a.get("D2"),a.get("A1"),a.get("E1")],markNotes:"single",labelNotes:"note",fretPosition:"all",highlightNotes:"none",assumePerfectFifth:!1,menus:{keyChange:{id:"KeyChangeMenu",showing:!1},instrument:{id:"InstrumentMenu",showing:!1},settings:{id:"SettingsMenu",showing:!1}},projects:[{title:"dance with the devil in Am",key:void 0,tonality:void 0,accidental:void 0,instrument:void 0,instrumentSound:void 0,instrumentVariant:void 0,theme:void 0,coloredNotes:void 0,tuning:void 0,keyChangeMenu:{showing:!1},fretboardMenu:{showing:!1},settingsMenu:{showing:!1},soundPlayerMenu:{showing:!1}}]};for(let t of e.allNotes)t.selected=!1,t.selectedOnStrings=[],t.highlighted=!1,t.highlightedOnStrings=[],t.appearsOnStrings=[];return e}function is(e,t){let r=[];for(let i=0;i<e.length;i++){let o;t?o=Q.detect(e,{assumePerfectFifth:!0}):o=Q.detect(e,{assumePerfectFifth:!1});for(let u of o)r.push(u)}return[...new Set(r)]}function os(){const e=L(),t=m(c=>c.musicTheory.allNotes),r=m(c=>c.musicTheory.assumePerfectFifth),[s,i]=b.useState([]),[o,u]=b.useState([]);return console.log("chord: "+Q.get(["C","E","G"])),b.useEffect(()=>{let c=t.reduce((d,f)=>(f.selected&&!d.includes(f.pc)&&(console.log("pushing: "+f.pc),d.push(f.pc)),d),[]);console.log(c);let l=is(c,r);console.log(l),i(l),u(Pt.detect(c)),console.log("effecting")},[t,r]),n.jsxs("div",{id:"ChordScaleIdentifier",children:[n.jsxs("div",{className:"toolbar",children:[n.jsx("label",{htmlFor:"AssumePerfectFifth",children:"Assume perfect fifth"}),n.jsx("input",{id:"AssumePerfectFifth",type:"checkbox",onChange:()=>e(et())})]}),n.jsxs("div",{className:"chords",children:[n.jsxs("div",{className:"chord",children:[n.jsx("p",{children:"Chord:"}),n.jsx("button",{children:s[0]})]}),n.jsxs("div",{className:"possibleChords",children:[n.jsx("p",{children:"Possible Chords:"}),s.map((c,l)=>l===0?null:n.jsx("button",{children:c},c+l))]}),n.jsxs("div",{className:"chordInversions",children:[n.jsx("p",{children:"Inversions:"}),s.map((c,l)=>n.jsx("button",{children:l},"inversion"+l))]})]}),n.jsxs("div",{className:"scales",children:[n.jsxs("div",{className:"scale",children:[n.jsx("p",{children:"Scale:"}),n.jsx("button",{children:o[0]})]}),n.jsxs("div",{className:"possibleScales",children:[n.jsx("p",{children:"Possible Scale:"}),o.map((c,l)=>l===0?null:n.jsx("button",{children:c},c+l))]}),n.jsx("div",{className:"scaleInversions",children:n.jsx("p",{children:"Scale inversions:"})})]})]})}function se(e){e.style.maxHeight=null}function re(e){e.style.maxHeight=e.scrollHeight+"px"}function as({showing:e}){const t=L(),r=m(c=>c.musicTheory.key),s=m(c=>c.musicTheory.accidental);let i=a.get(r.tonic).letter;b.useEffect(()=>{let c=document.getElementById("KeyChangeMenu");e?re(c):se(c)},[e]);function o(c,l){r.type==="major"?t(D(W.majorKey(c+l))):t(D(W.minorKey(c+l))),t(tt(l)),t(oe())}function u(c){t(c==="major"?D(W.majorKey(r.tonic)):D(W.minorKey(r.tonic))),t(oe())}return n.jsx("div",{id:"KeyChangeMenu",className:e?"showing":"",children:n.jsx("div",{className:"content",children:n.jsxs("div",{className:"note-selection",children:[n.jsxs("div",{className:"naturals",children:[n.jsx("button",{className:i==="C"?"active":"",onClick:()=>o("C",s),children:"C"}),n.jsx("button",{className:i==="D"?"active":"",onClick:()=>o("D",s),children:"D"}),n.jsx("button",{className:i==="E"?"active":"",onClick:()=>o("E",s),children:"E"}),n.jsx("button",{className:i==="F"?"active":"",onClick:()=>o("F",s),children:"F"}),n.jsx("button",{className:i==="G"?"active":"",onClick:()=>o("G",s),children:"G"}),n.jsx("button",{className:i==="A"?"active":"",onClick:()=>o("A",s),children:"A"}),n.jsx("button",{className:i==="B"?"active":"",onClick:()=>o("B",s),children:"B"})]}),n.jsxs("div",{className:"accidentals",children:[n.jsx("button",{className:s==="b"?"active":"",onClick:()=>o(i,"b"),children:i+"♭"}),n.jsx("button",{className:s===""?"active":"",onClick:()=>o(i,""),children:i}),n.jsx("button",{className:s==="#"?"active":"",onClick:()=>o(i,"#"),children:i+"♯"})]}),n.jsxs("div",{className:"majorMinor",children:[n.jsx("button",{className:r.type==="major"?"active":"",onClick:()=>u("major"),children:"Major"}),n.jsx("button",{className:r.type==="minor"?"active":"",onClick:()=>u("minor"),children:"Minor"})]})]})})})}function cs({showing:e}){return m(t=>t.ui.menus),b.useEffect(()=>{let t=document.getElementById("SettingsMenu");e?re(t):se(t)},[e]),n.jsx("div",{id:"SettingsMenu",children:n.jsx("div",{className:"content",children:"Settings Menu"})})}function ls({showing:e}){const t=L(),r=m(l=>l.musicTheory.markNotes),s=m(l=>l.musicTheory.labelNotes),i=m(l=>l.musicTheory.fretPosition),o=m(l=>l.musicTheory.highlightNotes),u=m(l=>l.fretboard.nutIsFixed);b.useEffect(()=>{let l=document.getElementById("InstrumentMenu");e?re(l):se(l)},[e]);function c(){t(nt(!u))}return n.jsxs("div",{id:"InstrumentMenu",children:[n.jsxs("div",{className:"settings",children:[n.jsxs("div",{className:"setting dropdown markNotes",children:[n.jsx("p",{children:"Mark notes"}),n.jsx("button",{children:r}),n.jsxs("div",{className:"dropdown-content",children:[n.jsx("button",{onClick:()=>t(I("single")),children:"Single"}),n.jsx("button",{onClick:()=>t(I("none")),children:"None"}),n.jsx("button",{onClick:()=>t(I("all")),children:"All"}),n.jsx("button",{onClick:()=>t(I("identical")),children:"Identical"}),n.jsx("button",{onClick:()=>t(I("onePerString")),children:"One per string"})]})]}),n.jsxs("div",{className:"setting dropdown labelNotes",children:[n.jsx("p",{children:"Label notes"}),n.jsx("button",{children:s}),n.jsxs("div",{className:"dropdown-content",children:[n.jsx("button",{onClick:()=>t(B("note")),children:"Note"}),n.jsx("button",{onClick:()=>t(B("interval")),children:"Interval"}),n.jsx("button",{onClick:()=>t(B("degree")),children:"Degree"}),n.jsx("button",{onClick:()=>t(B("doReMi")),children:"DoReMi"})]})]}),n.jsxs("div",{className:"setting dropdown fretPositions",children:[n.jsx("p",{children:"Position"}),n.jsx("button",{children:i}),n.jsxs("div",{className:"dropdown-content",children:[n.jsx("button",{children:"All"}),n.jsx("button",{children:"1"}),n.jsx("button",{children:"2"}),n.jsx("button",{children:"3"}),n.jsx("button",{children:"4"}),n.jsx("button",{children:"5"})]})]}),n.jsxs("div",{className:"setting dropdown highlight",children:[n.jsx("p",{children:"Highlight"}),n.jsx("button",{children:o}),n.jsxs("div",{className:"dropdown-content highlight",children:[n.jsx("button",{children:"All"}),n.jsx("button",{children:"None"}),n.jsx("button",{onClick:()=>t,children:"Scale"})]})]}),n.jsxs("div",{className:"setting dropdown clear",children:[n.jsx("p",{children:"Clear"}),n.jsx("button",{children:"All"}),n.jsxs("div",{className:"dropdown-content clear",children:[n.jsx("button",{onClick:()=>t(deselectNotes("all")),children:"All"}),n.jsx("button",{onClick:()=>t(deselectNotes("marked")),children:"Marked"}),n.jsx("button",{onClick:()=>t(deselectNotes("highlighted")),children:"Highlighted"})]})]}),n.jsxs("div",{className:"setting dropdown fixNut",children:[n.jsx("p",{children:"Fixed nut"}),n.jsx("button",{className:u?"nutFixedButton active":"nutFixedButton",onClick:()=>c(),children:u?"Fixed":"Normal"})]})]}),n.jsx("button",{className:"closeButton",children:"🎵"})]})}function us(){const e=L(),t=m(u=>u.ui.currentViewSection1),r=m(u=>u.fretboard.fretboardIsReady),s=m(u=>u.user.loginSuccess),i=m(u=>u.ui.menus);b.useEffect(()=>{if(s)e(ae({}));else{let u=rs();e(ae(u))}},[e,s]),b.useEffect(()=>{function u(){e(st(rt()))}return window.addEventListener("resize",me(u,20)),()=>{window.removeEventListener("resize",me(u,20))}},[e]);function o({view:u}){if(u==="fretboard")return n.jsx(ss,{});if(u==="piano")return n.jsx(Piano,{});if(u==="instrumentSettings")return n.jsx(InstrumentSettings,{});if(u==="keyChange")return n.jsx(KeyChange,{})}return r?n.jsxs("div",{className:"appLayout",children:[n.jsx(Un,{}),n.jsx(Ee,{}),n.jsx(as,{showing:i.keyChange.showing}),n.jsx(cs,{showing:i.settings.showing}),n.jsx(ls,{showing:i.instrument.showing}),n.jsx(o,{view:t}),n.jsx(os,{})]}):n.jsx(it,{})}us.propTypes={view:V.string};export{us as default};
