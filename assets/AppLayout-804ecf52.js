import{R as q,u as ye,c as Ce,g as ie,a as W,j as t,r as p,b as m,s as ne,h as ke,d as re,e as Se,f as ae,t as U,n as l,i as Oe,k as Ne,l as w,m as I,o as le,p as R,q as we,v as $,w as B,x as Te,y as Me,z as Le,A as Ie}from"./index-9ab7609b.js";import Fe from"./Loader-3b939377.js";function oe(e=q){const s=e===q?ye:Ce(e);return function(){const{store:n}=s();return n}}const Ae=oe();function Ee(e=q){const s=e===q?Ae:oe(e);return function(){return s().dispatch}}const M=Ee();function $e(e,s){let n=.1+.5*(1-e/s*100/100);var a="";let c=n/100;d(0,0);for(let h=1;h<=99;h++)n-=c,h%2===0?d(h,-n):d(h,n);d(100,0);let u=document.styleSheets[0],o=null;for(let h=0;h<u.cssRules.length;h++)if(u.cssRules[h].name==="dynamicSkew"){o=u.cssRules[h];break}o?o.cssText=`@keyframes stringVibration { ${a} }`:u.insertRule(`@keyframes stringVibration { ${a} }`,u.cssRules.length);function d(h,g){a+=`${h}% {
      transform: skewY(${g}deg);
    }`}}var ce={exports:{}},Ve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",De=Ve,We=De;function ue(){}function de(){}de.resetWarningCache=ue;var Re=function(){function e(n,a,r,c,u,o){if(o!==We){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function s(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:de,resetWarningCache:ue};return i.PropTypes=i,i};ce.exports=Re();var Be=ce.exports;const D=ie(Be);function Pe(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}var he=Pe,qe=typeof W=="object"&&W&&W.Object===Object&&W,Ge=qe,_e=Ge,He=typeof self=="object"&&self&&self.Object===Object&&self,Ke=_e||He||Function("return this")(),me=Ke,Ue=me,Ze=function(){return Ue.Date.now()},Xe=Ze,ze=/\s/;function Qe(e){for(var s=e.length;s--&&ze.test(e.charAt(s)););return s}var Ye=Qe,Je=Ye,et=/^\s+/;function tt(e){return e&&e.slice(0,Je(e)+1).replace(et,"")}var st=tt,it=me,nt=it.Symbol,fe=nt,Z=fe,be=Object.prototype,rt=be.hasOwnProperty,at=be.toString,V=Z?Z.toStringTag:void 0;function lt(e){var s=rt.call(e,V),i=e[V];try{e[V]=void 0;var n=!0}catch{}var a=at.call(e);return n&&(s?e[V]=i:delete e[V]),a}var ot=lt,ct=Object.prototype,ut=ct.toString;function dt(e){return ut.call(e)}var ht=dt,X=fe,mt=ot,ft=ht,bt="[object Null]",gt="[object Undefined]",z=X?X.toStringTag:void 0;function pt(e){return e==null?e===void 0?gt:bt:z&&z in Object(e)?mt(e):ft(e)}var xt=pt;function vt(e){return e!=null&&typeof e=="object"}var jt=vt,yt=xt,Ct=jt,kt="[object Symbol]";function St(e){return typeof e=="symbol"||Ct(e)&&yt(e)==kt}var Ot=St,Nt=st,Q=he,wt=Ot,Y=0/0,Tt=/^[-+]0x[0-9a-f]+$/i,Mt=/^0b[01]+$/i,Lt=/^0o[0-7]+$/i,It=parseInt;function Ft(e){if(typeof e=="number")return e;if(wt(e))return Y;if(Q(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=Q(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=Nt(e);var i=Mt.test(e);return i||Lt.test(e)?It(e.slice(2),i?2:8):Tt.test(e)?Y:+e}var At=Ft,Et=he,G=Xe,J=At,$t="Expected a function",Vt=Math.max,Dt=Math.min;function Wt(e,s,i){var n,a,r,c,u,o,d=0,h=!1,g=!1,f=!0;if(typeof e!="function")throw new TypeError($t);s=J(s)||0,Et(i)&&(h=!!i.leading,g="maxWait"in i,r=g?Vt(J(i.maxWait)||0,s):r,f="trailing"in i?!!i.trailing:f);function x(v){var T=n,E=a;return n=a=void 0,d=v,c=e.apply(E,T),c}function b(v){return d=v,u=setTimeout(S,s),h?x(v):c}function k(v){var T=v-o,E=v-d,K=s-T;return g?Dt(K,r-E):K}function N(v){var T=v-o,E=v-d;return o===void 0||T>=s||T<0||g&&E>=r}function S(){var v=G();if(N(v))return L(v);u=setTimeout(S,k(v))}function L(v){return u=void 0,f&&n?x(v):(n=a=void 0,c)}function y(){u!==void 0&&clearTimeout(u),d=0,n=o=a=u=void 0}function j(){return u===void 0?c:L(G())}function O(){var v=G(),T=N(v);if(n=arguments,a=this,o=v,T){if(u===void 0)return b(o);if(g)return clearTimeout(u),u=setTimeout(S,s),x(o)}return u===void 0&&(u=setTimeout(S,s)),c}return O.cancel=y,O.flush=j,O}var Rt=Wt;const ee=ie(Rt);const Bt=()=>t.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{className:"soundwave-1",d:"M12.0355 8.52113C12.4261 8.1306 13.0674 8.12674 13.3881 8.57637C14.0882 9.55788 14.5 10.7592 14.5 12.0567C14.5 13.3541 14.0882 14.5554 13.3881 15.537C13.0674 15.9866 12.4261 15.9827 12.0355 15.5922C11.645 15.2017 11.6586 14.5725 11.9408 14.0978C12.296 13.5002 12.5 12.8023 12.5 12.0567C12.5 11.3111 12.296 10.6131 11.9408 10.0156C11.6586 9.54084 11.645 8.91165 12.0355 8.52113Z",fill:"#ffffff"}),t.jsx("path",{className:"soundwave-2",d:"M14.864 5.69316C15.2545 5.30263 15.8921 5.29976 16.2419 5.72712C17.6532 7.45118 18.5 9.65526 18.5 12.0571C18.5 14.459 17.6532 16.6631 16.2419 18.3871C15.8921 18.8145 15.2545 18.8116 14.864 18.4211C14.4734 18.0306 14.4792 17.4007 14.8183 16.9648C15.8723 15.6098 16.5 13.9068 16.5 12.0571C16.5 10.2075 15.8723 8.50445 14.8183 7.14944C14.4792 6.71351 14.4734 6.08368 14.864 5.69316Z",fill:"#ffffff"}),t.jsx("path",{className:"soundwave-3",d:"M17.6929 2.79322C18.0835 2.40268 18.7197 2.40049 19.0815 2.81776C21.2113 5.2739 22.5002 8.47903 22.5002 11.9852C22.5002 15.5312 21.1818 18.7693 19.0085 21.2361C18.6434 21.6505 18.0073 21.6433 17.6198 21.2497C17.2324 20.8562 17.2409 20.2256 17.6011 19.8069C19.408 17.7063 20.5002 14.9733 20.5002 11.9852C20.5002 9.03126 19.4329 6.32661 17.6628 4.23586C17.306 3.81436 17.3024 3.18373 17.6929 2.79322Z",fill:"#ffffff"}),t.jsx("path",{className:"speaker",d:"M10 16.5858V7.41421C10 6.52331 8.92286 6.07714 8.29289 6.70711L6.29289 8.70711C6.10536 8.89464 5.851 9 5.58579 9H4C3.44772 9 3 9.44772 3 10V14C3 14.5523 3.44772 15 4 15H5.58579C5.851 15 6.10536 15.1054 6.29289 15.2929L8.29289 17.2929C8.92286 17.9229 10 17.4767 10 16.5858Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"})]}),te=()=>t.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{className:"soundwave-1",d:"M13.0355 8.52113C13.4261 8.1306 14.0674 8.12674 14.3881 8.57637C15.0882 9.55788 15.5 10.7592 15.5 12.0567C15.5 13.3541 15.0882 14.5554 14.3881 15.537C14.0674 15.9866 13.4261 15.9827 13.0355 15.5922C12.645 15.2017 12.6586 14.5725 12.9408 14.0978C13.296 13.5002 13.5 12.8023 13.5 12.0567C13.5 11.3111 13.296 10.6131 12.9408 10.0156C12.6586 9.54084 12.645 8.91165 13.0355 8.52113Z",fill:"#ffffff"}),t.jsx("path",{className:"soundwave-2",d:"M15.864 5.69316C16.2545 5.30263 16.8921 5.29976 17.2419 5.72712C18.6532 7.45118 19.5 9.65526 19.5 12.0571C19.5 14.459 18.6532 16.6631 17.2419 18.3871C16.8921 18.8145 16.2545 18.8116 15.864 18.4211C15.4734 18.0306 15.4792 17.4007 15.8183 16.9648C16.8723 15.6098 17.5 13.9068 17.5 12.0571C17.5 10.2075 16.8723 8.50445 15.8183 7.14944C15.4792 6.71351 15.4734 6.08368 15.864 5.69316Z",fill:"#ffffff"}),t.jsx("path",{className:"speaker",d:"M11 16.5858V7.41421C11 6.52331 9.92286 6.07714 9.29289 6.70711L7.29289 8.70711C7.10536 8.89464 6.851 9 6.58579 9H5C4.44772 9 4 9.44772 4 10V14C4 14.5523 4.44772 15 5 15H6.58579C6.851 15 7.10536 15.1054 7.29289 15.2929L9.29289 17.2929C9.92286 17.9229 11 17.4767 11 16.5858Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"})]}),Pt=()=>t.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{className:"soundwave-1",d:"M15.0355 8.52113C15.4261 8.1306 16.0674 8.12674 16.3881 8.57637C17.0882 9.55788 17.5 10.7592 17.5 12.0567C17.5 13.3541 17.0882 14.5554 16.3881 15.537C16.0674 15.9866 15.4261 15.9827 15.0355 15.5922C14.645 15.2017 14.6586 14.5725 14.9408 14.0978C15.296 13.5002 15.5 12.8023 15.5 12.0567C15.5 11.3111 15.296 10.6131 14.9408 10.0156C14.6586 9.54084 14.645 8.91165 15.0355 8.52113Z",fill:"#ffffff"}),t.jsx("path",{className:"speaker",d:"M13 16.5858V7.41421C13 6.52331 11.9229 6.07714 11.2929 6.70711L9.29289 8.70711C9.10536 8.89464 8.851 9 8.58579 9H7C6.44772 9 6 9.44772 6 10V14C6 14.5523 6.44772 15 7 15H8.58579C8.851 15 9.10536 15.1054 9.29289 15.2929L11.2929 17.2929C11.9229 17.9229 13 17.4767 13 16.5858Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"})]}),qt=()=>t.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{className:"speaker",d:"M11 16.5858V7.41421C11 6.52331 9.92286 6.07714 9.29289 6.70711L7.29289 8.70711C7.10536 8.89464 6.851 9 6.58579 9H5C4.44772 9 4 9.44772 4 10V14C4 14.5523 4.44772 15 5 15H6.58579C6.851 15 7.10536 15.1054 7.29289 15.2929L9.29289 17.2929C9.92286 17.9229 11 17.4767 11 16.5858Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{className:"soundwave-muted",d:"M20 9.5L15 14.5",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{className:"soundwave-muted",d:"M20 14.5L15 9.5",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"})]}),Gt=()=>t.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{className:"speaker",d:"M12 16.5858V7.41421C12 6.52331 10.9229 6.07714 10.2929 6.70711L8.29289 8.70711C8.10536 8.89464 7.851 9 7.58579 9H6C5.44772 9 5 9.44772 5 10V14C5 14.5523 5.44772 15 6 15H7.58579C7.851 15 8.10536 15.1054 8.29289 15.2929L10.2929 17.2929C10.9229 17.9229 12 17.4767 12 16.5858Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{className:"soundwave-warning",d:"M16.5361 13.5353V8",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{className:"soundwave-warning",d:"M17.5361 16.598C17.5361 17.1503 17.0884 17.598 16.5361 17.598C15.9838 17.598 15.5361 17.1503 15.5361 16.598C15.5361 16.0457 15.9838 15.598 16.5361 15.598C17.0884 15.598 17.5361 16.0457 17.5361 16.598Z",fill:"#666666"})]}),_t=()=>t.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9.71069 18.2929C10.1012 18.6834 10.7344 18.6834 11.1249 18.2929L16.0123 13.4006C16.7927 12.6195 16.7924 11.3537 16.0117 10.5729L11.1213 5.68254C10.7308 5.29202 10.0976 5.29202 9.70708 5.68254C9.31655 6.07307 9.31655 6.70623 9.70708 7.09676L13.8927 11.2824C14.2833 11.6729 14.2833 12.3061 13.8927 12.6966L9.71069 16.8787C9.32016 17.2692 9.32016 17.9023 9.71069 18.2929Z",fill:"#0F0F0F"})}),Ht=()=>t.jsxs("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M5 12L5 4",stroke:"#222222",strokeLinecap:"round"}),t.jsx("path",{d:"M19 20L19 17",stroke:"#222222",strokeLinecap:"round"}),t.jsx("path",{d:"M5 20L5 16",stroke:"#222222",strokeLinecap:"round"}),t.jsx("path",{d:"M19 13L19 4",stroke:"#222222",strokeLinecap:"round"}),t.jsx("path",{d:"M12 7L12 4",stroke:"#222222",strokeLinecap:"round"}),t.jsx("path",{d:"M12 20L12 11",stroke:"#222222",strokeLinecap:"round"}),t.jsx("circle",{cx:"5",cy:"14",r:"2",stroke:"#222222",strokeLinecap:"round"}),t.jsx("circle",{cx:"12",cy:"9",r:"2",stroke:"#222222",strokeLinecap:"round"}),t.jsx("circle",{cx:"19",cy:"15",r:"2",stroke:"#222222",strokeLinecap:"round"})]});function Kt(){return t.jsx("div",{id:"Spinner"})}function Ut(){const e=p.useRef(null),[s,i]=p.useState(!0),[n,a]=p.useState(Gt),[r,c]=p.useState(!1),[u,o]=p.useState(null),[d,h]=p.useState(8),g=m(b=>b.user.soundFile);p.useEffect(()=>{const b=setInterval(()=>{ne.state()==="loaded"&&(i(!1),clearInterval(b),a(te))},50);return()=>{clearInterval(b)}},[g]),p.useEffect(()=>{function b(k){k.target.closest("#VolumeMixer")||c(!1)}return document.addEventListener("click",b),()=>{document.removeEventListener("click",b)}},[]);function f(){if(!s){u&&clearTimeout(u);const b=setTimeout(()=>{c(!1)},3e3);o(b),c(!r)}}function x(){if(!s){u&&clearTimeout(u);let b=parseInt(e.current.value);h(b),b===0&&a(qt),b>0&&b<=3&&a(Pt),b>3&&b<=7&&a(te),b>7&&b<=10&&a(Bt);let k=b/10;ke.Howler.volume(k);const N=setTimeout(()=>{c(!1)},3e3);o(N)}}return t.jsxs("div",{id:"VolumeMixer",className:`${r?"expanded":""} ${s?"loadingSound":""}`,children:[t.jsxs("button",{className:"volumeButton",onClick:()=>f(),children:[s?t.jsx(Kt,{}):null,n]}),t.jsx("div",{className:"volumeSlider",children:t.jsx("input",{className:"slider",ref:e,type:"range",orient:"vertical",value:d,min:"0",max:"10",onChange:x})})]})}function Zt(){return t.jsx("nav",{id:"Navbar",children:t.jsxs("div",{className:"flex-wrapper",children:[t.jsxs("div",{className:"userSettings",children:[t.jsx("button",{className:"loginBtn",children:"Login"}),t.jsx("button",{className:"projectsBtn",children:"Projects"})]}),t.jsx("div",{className:"wrapper",children:t.jsx(Ut,{})})]})})}function ge(){const e=re.createRef(),s=M(),i=m(r=>r.fretboard.fretCount),n=m(r=>r.fretboard.fretCap);function a(){s(Se(parseInt(e.current.value)))}return t.jsx("input",{id:"fretCount-slider",ref:e,type:"range",value:i,min:"0",max:n,onChange:a})}ge.propTypes={activeView:D.string,setActiveView:D.func};function pe(){const e=M();m(n=>n.ui.currentViewSection1);const s=m(n=>n.musicTheory.key);m(n=>n.ui.menus);const i=m(n=>n.fretboard.fretCount);return t.jsxs("div",{id:"toolbar",children:[t.jsxs("div",{className:"toolbar-item",children:[t.jsx("h4",{children:"Key"}),t.jsxs("button",{className:"keyChangeButton",onClick:()=>e(ae("keyChange")),children:[s.tonic," ",s.type==="major"?"Major":"Minor"]})]}),t.jsxs("div",{className:"toolbar-item",children:[t.jsx("h4",{children:"Instrument"}),t.jsx("button",{onClick:()=>e(U("settings")),children:"🛠️"})]}),t.jsxs("div",{className:"toolbar-item",children:[t.jsx("h4",{children:"Menus"}),t.jsx("button",{onClick:()=>e(U("instrument")),children:"🎸"})]}),t.jsxs("div",{className:"toolbar-item",children:[t.jsxs("h4",{children:["Frets: ",i==0?"None":i]}),t.jsx(ge,{})]})]})}pe.propTypes={activeView:D.string,setActiveView:D.func};function Xt(e,s,i,n){let a=i.type==="minor"?i.natural.scale:i.scale;if(s==="note"){for(let r of a)if(l.enharmonic(r)===e)return r.includes("b")?r.replace(/b/g,"♭"):r.includes("#")?r.replace(/#/g,"♯"):r;return n==="b"?l.enharmonic(e).replace(/b/g,"♭"):e.replace(/#/g,"♯")}if(s==="degree"){for(let r=0;r<a.length;r++)if(e===a[r])return r+1}else if(s==="interval"){for(let r=0;r<a.length;r++)if(e===a[r])return i.intervals[r]}else if(s==="doReMi"){for(let r=0;r<a.length;r++)if(e===i.scale[r]){if(r===0)return"Do";if(r===1)return"Re";if(r===2)return"Mi";if(r===3)return"Fa";if(r===4)return"So";if(r===5)return"La";if(r===6)return"Ti"}}return e}const xe=p.memo(function({pitchClass:s,octave:i,noteWidth:n,labelWidth:a,selected:r,highlighted:c,stringNumber:u}){const o=m(f=>f.musicTheory.labelNotes),d=m(f=>f.musicTheory.key),h=m(f=>f.musicTheory.accidental);let g=Xt(s,o,d,h);return t.jsx("button",{className:`note ${r?"selected":""} ${c?"highlighted":""}`,"data-pitchclass":s,"data-octave":i,"data-stringnumber":u,style:{minWidth:n,maxWidth:n},children:t.jsx("span",{style:{minWidth:a,maxWidth:a,minHeight:a,maxHeight:a},children:g})})});function zt({tuning:e,allNotes:s,nutIsFixed:i}){const n=m(r=>r.fretboard.notesLabelWidth),a=m(r=>r.fretboard.fretWidths);return t.jsx("div",{className:`nut ${i?"fixed":""}`,children:e.map((r,c)=>{let u=e.length-c,o=s.filter(g=>g.name===r.name&&g.appearsOnStrings.includes(u))[0],d=a[0],h=o.selectedOnStrings.includes(u);return t.jsx(xe,{pitchClass:o.pc,octave:o.oct,noteWidth:d,labelWidth:n,selected:h,highlighted:o.highlighted,stringNumber:u},`note${o.name}string${u}`)})})}let F=[{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null}];function Qt(e,s,i,n){let a=s;for(let d=0;d<i;d++)a-=n[d];$e(a,s);let r=document.getElementsByClassName("stringVisual")[e],c=r.querySelector(".staticPart"),u=r.querySelector(".vibratingPart");F[e].timeout&&clearTimeout(F[e].timeout),u.classList.remove("animate"),u.offsetWidth,c.style.width=`calc(100% - ${a}px)`,u.style.width=`${a}px`,u.classList.add("animate");const o=[...F];o[e].isAnimating=!0,F=o,F[e].timeout=setTimeout(()=>{const d=[...F];d[e].isAnimating=!1,F=d,u.classList.remove("animate")},3e3)}function Yt(e,s,i){let n,a,r=!1,c,u,o=[],d=document.getElementById("Fretboard"),h=document.getElementById("Strings"),g=document.getElementById("FretVisuals"),f=document.getElementById("StringVisuals");d.addEventListener("mousedown",x),d.addEventListener("touchstart",b);function x(y){o=[];let j;d.classList.contains("nutIsFixed")?(j=h.clientWidth!==h.scrollWidth,o.push(h),o.push(g),o.push(f)):(j=d.clientWidth!==d.scrollWidth,o.push(d)),j&&(document.addEventListener("mousemove",k),document.addEventListener("mouseup",S),n=y.pageX-d.offsetLeft,a=o[0].scrollLeft)}function b(y){o=[];let j;d.classList.contains("nutIsFixed")?(j=h.clientWidth!==h.scrollWidth,o.push(h),o.push(g),o.push(f)):(j=d.clientWidth!==d.scrollWidth,o.push(d)),j&&(document.addEventListener("touchmove",N),document.addEventListener("touchend",L),n=y.touches[0].pageX-d.offsetLeft,a=o[0].scrollLeft)}function k(y){if(y.preventDefault(),c=y.pageX-d.offsetLeft,u=c-n,Math.abs(u)>10&&(i(!0),r=!0),r)for(let O=0;O<o.length;O++)o[O].scrollLeft=a-u}function N(y){if(y.preventDefault(),c=y.touches[0].pageX-d.offsetLeft,u=c-n,Math.abs(u)>10&&(i(!0),r=!0),r)for(let O=0;O<o.length;O++)o[O].scrollLeft=a-u}function S(){if(r){let y=o[0].scrollLeft;for(let j=0;j<o.length;j++)e(s(y));r=!1}document.removeEventListener("mouseup",S),document.removeEventListener("mousemove",k)}function L(){if(r){let y=o[0].scrollLeft;for(let j=0;j<o.length;j++)e(s(y));r=!1}document.removeEventListener("touchEnd",L),document.removeEventListener("touchMove",N)}}function ve(e,s){let i=0;for(let n=0;n<e.length;n++)i+=e[n];return i}function Jt(e,s){return e.filter(n=>n.appearsOnStrings.includes(s))}const es=p.memo(function({notes:s,stringNumber:i}){const n=m(c=>c.fretboard.nutIsFixed),a=m(c=>c.fretboard.notesLabelWidth),r=m(c=>c.fretboard.fretWidths);return t.jsx("div",{className:"string","data-stringnumber":i,children:s.map((c,u)=>{let o=c.selectedOnStrings.includes(i),d=n?r[u+1]:r[u];return t.jsx(xe,{pitchClass:c.pc,octave:c.oct,noteWidth:d,labelWidth:a,selected:o,highlighted:c.highlighted,stringNumber:i},`note${c.name}string${i}`)})})});function ts({tuning:e,nutIsFixed:s,allNotes:i,fretWidths:n,width:a}){return t.jsx("div",{id:"Strings",style:{height:"145px",left:s?n[0]+"px":"auto",right:s?"unset":"auto",overflow:s?"hidden":"visible",maxWidth:s?a:"100%"},children:e.map((r,c)=>{let u=e.length-c,o=Jt(i,u);return s&&(o=o.slice(1)),t.jsx(es,{notes:o,stringNumber:u},`string${u}`)})})}function ss({style:e,theme:s,tuning:i,fretWidths:n,fretboardWidth:a,nutIsFixed:r,width:c}){let u=ve(n);return t.jsxs(t.Fragment,{children:[t.jsx("div",{id:"StringVisuals",style:{width:r?a:u},children:i.map((o,d)=>{let h=i.length-d;return t.jsxs("div",{className:"stringVisual",style:{width:r?u:"auto"},children:[t.jsx("span",{className:"staticPart"}),t.jsx("span",{className:"vibratingPart"})]},`stringVisual${h}`)})}),r?t.jsx("div",{className:"nutVisual",style:{minWidth:n[0]+"px"}}):null,t.jsx("div",{id:"FretVisuals",className:`${r?"nutIsFixed":""}`,style:{left:r?n[0]+"px":"auto",right:r?0:"auto"},children:n.map((o,d)=>d===0&&r?null:t.jsxs("div",{className:!r&&d===0?"fretVisual nutVisual":"fretVisual",style:{minWidth:o,maxWidth:r?c:"auto"},children:[t.jsx("span",{className:"fretband"}),[3,5,7,9,15,17,19,21].includes(d)?t.jsx("span",{className:"fretMarker"}):null,[12,24].includes(d)?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"fretMarker"}),t.jsx("span",{className:"fretMarker"})]}):null,[24].includes(d)?t.jsx("span",{className:"fretband"}):null]},`fretVisual${d}`))})]})}function is(){const[e,s]=p.useState(!1),i=M(),n=m(f=>f.musicTheory.allNotes),a=m(f=>f.musicTheory.markNotes),r=m(f=>f.fretboard.tuning),c=m(f=>f.fretboard.fretWidths),u=m(f=>f.fretboard.nutIsFixed),o=m(f=>f.fretboard.fretboardWidth),d=m(f=>f.fretboard.fretboardStyle),h=m(f=>f.fretboard.fretboardTheme);p.useEffect(()=>{Yt(i,Oe,s)},[i]);function g(f){if(e)s(!1);else{let x=f.target;if(x.parentNode.classList.contains("note")&&(x=x.parentNode),x.classList.contains("note")){let b=x.parentNode,k=x.getAttribute("data-octave"),N=x.getAttribute("data-pitchclass"),S=parseInt(x.getAttribute("data-stringnumber")),L=r.length-S,y=b.querySelectorAll(".note"),j=Array.from(y).indexOf(x),O=l.get(N+k),v=x.classList.contains("selected");a!=="none"&&i(Ne({note:O,stringNumber:S,wasSelected:v})),ne.playNote(N+k,S);let T=ve(c);Qt(L,T,j,c)}}}return t.jsxs("div",{id:"Fretboard",className:u?"nutIsFixed":"",style:{width:o,height:145},onClick:g,children:[u?t.jsx(zt,{tuning:r,allNotes:n,nutIsFixed:u}):null,t.jsx(ts,{tuning:r,nutIsFixed:u,allNotes:n,fretWidths:c,width:o-c[0]}),t.jsx(ss,{style:d,theme:h,tuning:r,fretWidths:c,fretboardWidth:o,nutIsFixed:u,width:o-c[0]})]})}function ns(){let e={username:"Guest",globalSettings:{chordScaleIdentifier:{identify:{chord:!1,scale:!1,displayOnInstrument:!1,highlight:!1}}},key:w.majorKey("C"),scale:"major",tonality:"todo",accidental:"",allNotes:[{...l.get("C0")},{...l.get("C#0")},{...l.get("D0")},{...l.get("D#0")},{...l.get("E0")},{...l.get("F0")},{...l.get("F#0")},{...l.get("G0")},{...l.get("G#0")},{...l.get("A0")},{...l.get("A#0")},{...l.get("B0")},{...l.get("C1")},{...l.get("C#1")},{...l.get("D1")},{...l.get("D#1")},{...l.get("E1")},{...l.get("F1")},{...l.get("F#1")},{...l.get("G1")},{...l.get("G#1")},{...l.get("A1")},{...l.get("A#1")},{...l.get("B1")},{...l.get("C2")},{...l.get("C#2")},{...l.get("D2")},{...l.get("D#2")},{...l.get("E2")},{...l.get("F2")},{...l.get("F#2")},{...l.get("G2")},{...l.get("G#2")},{...l.get("A2")},{...l.get("A#2")},{...l.get("B2")},{...l.get("C3")},{...l.get("C#3")},{...l.get("D3")},{...l.get("D#3")},{...l.get("E3")},{...l.get("F3")},{...l.get("F#3")},{...l.get("G3")},{...l.get("G#3")},{...l.get("A3")},{...l.get("A#3")},{...l.get("B3")},{...l.get("C4")},{...l.get("C#4")},{...l.get("D4")},{...l.get("D#4")},{...l.get("E4")},{...l.get("F4")},{...l.get("F#4")},{...l.get("G4")},{...l.get("G#4")},{...l.get("A4")},{...l.get("A#4")},{...l.get("B4")},{...l.get("C5")},{...l.get("C#5")},{...l.get("D5")},{...l.get("D#5")},{...l.get("E5")},{...l.get("F5")},{...l.get("F#5")},{...l.get("G5")},{...l.get("G#5")},{...l.get("A5")},{...l.get("A#5")},{...l.get("B5")},{...l.get("C6")},{...l.get("C#6")},{...l.get("D6")},{...l.get("D#6")},{...l.get("E6")},{...l.get("F6")},{...l.get("F#6")},{...l.get("G6")},{...l.get("G#6")},{...l.get("A6")},{...l.get("A#6")},{...l.get("B6")},{...l.get("C7")},{...l.get("C#7")},{...l.get("D7")},{...l.get("D#7")},{...l.get("E7")},{...l.get("F7")},{...l.get("F#7")},{...l.get("G7")},{...l.get("G#7")},{...l.get("A7")},{...l.get("A#7")},{...l.get("B7")},{...l.get("C8")},{...l.get("C#8")},{...l.get("D8")},{...l.get("D#8")},{...l.get("E8")},{...l.get("F8")},{...l.get("F#8")},{...l.get("G8")},{...l.get("G#8")},{...l.get("A8")},{...l.get("A#8")},{...l.get("B8")}],nutIsFixed:!1,soundFile:"jazzBass.mp3",instrumentStyle:"default",instrumentTheme:"default",coloredNotes:!1,tuning:[l.get("G2"),l.get("D2"),l.get("A1"),l.get("E1")],markNotes:"single",labelNotes:"note",fretPosition:"all",highlightNotes:void 0,assumePerfectFifth:!1,menus:{instrument:{id:"InstrumentMenu",showing:!1},settings:{id:"SettingsMenu",showing:!1}},instrumentView:{activeInstrument:"fretboard",fretboard:{settings:{enableFretNumbers:!1,enableFretMarkers:!1}},piano:{settings:{test:!1}}},tabMenuSettings:{activeTab:"Identify",tabs:{chordScaleIdentifier:{settings:{chord:!1,scale:!1,displayOnInstrument:!1,highlight:!1,showChordsDeviatingByNotes:0}},chordScaleDictionary:{settings:{test:!1}},progression:{settings:{test:!1}}}},projects:[{title:"dance with the devil in Am",key:void 0,tonality:void 0,accidental:void 0,instrument:void 0,instrumentSound:void 0,instrumentVariant:void 0,theme:void 0,coloredNotes:void 0,tuning:void 0,keyChangeMenu:{showing:!1},fretboardMenu:{showing:!1},settingsMenu:{showing:!1},soundPlayerMenu:{showing:!1},chordScaleIdentifierMenu:{identify:{chords:{showNotes:!0,filterByMatchingNotes:"all"},scales:{}},dictionary:{},progression:{}}}]};for(let s of e.allNotes)s.selected=!1,s.selectedOnStrings=[],s.highlighted=!1,s.highlightedOnStrings=[],s.appearsOnStrings=[];return e}function je({id:e,title:s,onClose:i,children:n}){const a=p.useCallback(()=>{document.querySelector(".modal").classList.add("fadeOut"),setTimeout(()=>{i()},200)},[i]);return p.useEffect(()=>{let r=document.querySelector(".modal");const c=u=>{u.target.classList.contains("modal")&&a()};return r.addEventListener("click",c),()=>{r.removeEventListener("click",c)}},[a]),t.jsx("div",{id:e,className:"modal",children:t.jsxs("div",{className:"contentWindow",children:[t.jsxs("div",{className:"windowHeader",children:[t.jsx("button",{onClick:()=>a(),children:"✓"}),t.jsx("h4",{children:s}),t.jsx("button",{onClick:()=>a(),children:"✖"})]}),t.jsx("div",{className:"content",children:n})]})})}function rs(){const e=M(),s=m(o=>o.musicTheory.key),i=m(o=>o.musicTheory.accidental),[n,a]=p.useState(!1);let r=l.get(s.tonic).letter;p.useEffect(()=>{n?s.type==="major"?e(I(w.majorKey(s.tonic).scale)):e(I(w.minorKey(s.tonic).natural.scale)):e(I())},[n,e,s]);function c(o,d){s.type==="major"?e(R(w.majorKey(o+d))):e(R(w.minorKey(o+d))),e(we(d)),n&&s.type==="major"?e(I(w.majorKey(o+d).scale)):n&&s.type==="minor"&&e(I(w.minorKey(o+d).natural.scale))}function u(o){o==="major"?(e(R(w.majorKey(s.tonic))),n&&e(I(w.majorKey(s.tonic).scale))):(e(R(w.minorKey(s.tonic))),n&&e(I(w.minorKey(s.tonic).natural.scale)))}return t.jsxs(je,{id:"KeyChangeModal",title:"Key change",onClose:()=>e(le()),children:[t.jsxs("div",{className:"note-selection",children:[t.jsx("p",{children:"Choose a key"}),t.jsxs("div",{className:"naturals",children:[t.jsx("button",{className:r==="C"?"active":"",onClick:()=>c("C",i),children:"C"}),t.jsx("button",{className:r==="D"?"active":"",onClick:()=>c("D",i),children:"D"}),t.jsx("button",{className:r==="E"?"active":"",onClick:()=>c("E",i),children:"E"}),t.jsx("button",{className:r==="F"?"active":"",onClick:()=>c("F",i),children:"F"}),t.jsx("button",{className:r==="G"?"active":"",onClick:()=>c("G",i),children:"G"}),t.jsx("button",{className:r==="A"?"active":"",onClick:()=>c("A",i),children:"A"}),t.jsx("button",{className:r==="B"?"active":"",onClick:()=>c("B",i),children:"B"})]}),t.jsx("p",{children:"Sharp or flat?"}),t.jsxs("div",{className:"accidentals",children:[t.jsx("button",{className:i==="b"?"active":"",onClick:()=>c(r,"b"),children:r+"♭"}),t.jsx("button",{className:i===""?"active":"",onClick:()=>c(r,""),children:r}),t.jsx("button",{className:i==="#"?"active":"",onClick:()=>c(r,"#"),children:r+"♯"})]}),t.jsx("p",{children:"Major or Minor?"}),t.jsxs("div",{className:"majorMinor",children:[t.jsxs("button",{className:s.type==="major"?"active":"",onClick:()=>u("major"),children:[s.tonic," Major"]}),t.jsxs("button",{className:s.type==="minor"?"active":"",onClick:()=>u("minor"),children:[s.tonic," Minor"]})]})]}),t.jsx("div",{className:"highlightScaleOption",children:t.jsxs("button",{onClick:()=>a(!n),children:[n?"☑":"☐"," Highlight notes in key"]})})]})}function as({tabs:e}){const s=m(a=>a.ui.tabMenuSettings),[i,n]=p.useState(s.activeTab);return t.jsxs("div",{id:"TabMenu",children:[t.jsx("div",{className:"tabs",children:e.map(a=>t.jsx("div",{className:`tab ${i===a.tabTitle?"active":""}`,onClick:()=>n(a.tabTitle),children:a.tabTitle},"tab_"+a.tabTitle))}),t.jsx("div",{className:"tab-content",children:e.map(a=>i===a.tabTitle?t.jsx(re.Fragment,{children:a.tabContent},"tabContent_"+a.tabTitle):null)})]})}function ls(e){let s=[];return s=e.reduce((i,n)=>(n.selected&&!i.includes(n.pc)&&i.push(n.pc),i),[]),s}function os({title:e,settingsModal:s,children:i}){const n=M(),[a,r]=p.useState(!1),[c,u]=p.useState(_t),o=p.useRef(null);function d(h){console.log(h.target),h.target.closest(".settingsButton")?n(ae(s)):r(!a)}return t.jsxs("div",{className:`collapsible ${a?"open":"closed"}`,children:[t.jsxs("div",{className:"collapsibleHeader",onClick:h=>d(h),children:[c,t.jsx("p",{className:"title",children:e}),s&&t.jsx("button",{className:"settingsButton",children:t.jsx(Ht,{})})]}),t.jsx("div",{ref:o,className:"content",children:i})]})}let P;const cs=new Uint8Array(16);function us(){if(!P&&(P=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(cs)}const C=[];for(let e=0;e<256;++e)C.push((e+256).toString(16).slice(1));function ds(e,s=0){return C[e[s+0]]+C[e[s+1]]+C[e[s+2]]+C[e[s+3]]+"-"+C[e[s+4]]+C[e[s+5]]+"-"+C[e[s+6]]+C[e[s+7]]+"-"+C[e[s+8]]+C[e[s+9]]+"-"+C[e[s+10]]+C[e[s+11]]+C[e[s+12]]+C[e[s+13]]+C[e[s+14]]+C[e[s+15]]}const hs=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),se={randomUUID:hs};function H(e,s,i){if(se.randomUUID&&!s&&!e)return se.randomUUID();e=e||{};const n=e.random||(e.rng||us)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,s){i=i||0;for(let a=0;a<16;++a)s[i+a]=n[a];return s}return ds(n)}function ms({intervals:e,missingChordIntervals:s,simplified:i,canChangeChord:n}){const[a,r]=p.useState(i);function c(o,d){if(console.log("interval type: "),console.log(o),a&&!o)return null;{const h=n?()=>(o.number,void 0):void 0;return t.jsx("button",{className:`intervalButton ${s.includes(o.number)?"missing":""}`,onClick:h,children:o.number},H())}}function u(o){}return t.jsxs("div",{className:`intervals  ${a?"simplified":""}`,children:[t.jsx("div",{className:"row",children:e.slice(0,12).map((o,d)=>c(o))}),t.jsx("div",{className:"row",children:e.includes("has intervals bigger than 7")&&e.slice(12).map((o,d)=>c(o))})]})}function fs({chord:e,showNotes:s,showIntervals:i,intervalSettings:n}){return t.jsxs("div",{className:`chordDetails ${e.isExactMatch?"exactMatch":""}`,children:[t.jsxs("p",{className:"chordSymbol",children:[e.root+e.quality,t.jsx("span",{children:e.extension}),e.suspension&&t.jsx("span",{className:"suspension",children:e.suspension}),e.alteration&&t.jsxs("span",{className:"alteration",children:["(",e.alteration,")"]})]}),t.jsxs("div",{className:"chordNotes",children:["(",e.notes.map((a,r)=>r!==e.notes.length-1?t.jsxs("p",{children:[a,t.jsx("span",{children:", "})]},H()):t.jsx("p",{children:a},H())),")"]}),t.jsx(ms,{intervals:e.intervals,missingChordIntervals:e.missingChordIntervals})]})}const A={notes:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],similarIntervals:{1:[1,2],2:[1,2],3:[3,4],4:[3,4],5:[],6:[6,7,8],7:[6,7,8],8:[6,7,8],9:[],10:[10,11],11:[10,11]},chordQualities:{default:[{extension:7,intervals:[{number:0,isOmittable:!1},{number:4,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:9,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!1},{number:4,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:11,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!1},{number:5,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:13,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!0},{number:5,isOmittable:!1},{number:7,isOmittable:!0},{number:9,isOmittable:!1},{number:10,isOmittable:!1}]}],major:[{extension:5,intervals:[{number:0,isOmittable:!1},{number:7,isOmittable:!1}]},{extension:null,intervals:[{number:0,isOmittable:!1},{number:4,isOmittable:!1},{number:7,isOmittable:!0}]},{extension:7,intervals:[{number:0,isOmittable:!1},{number:4,isOmittable:!1},{number:7,isOmittable:!0},{number:11,isOmittable:!1}]},{extension:9,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!1},{number:4,isOmittable:!1},{number:7,isOmittable:!0},{number:11,isOmittable:!1}]},{extension:11,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!1},{number:5,isOmittable:!1},{number:7,isOmittable:!0},{number:11,isOmittable:!1}]},{extension:13,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!1},{number:5,isOmittable:!0},{number:7,isOmittable:!0},{number:9,isOmittable:!1},{number:11,isOmittable:!1}]}],minor:[{extension:null,intervals:[{number:0,isOmittable:!1},{number:3,isOmittable:!1},{number:7,isOmittable:!0}]},{extension:7,intervals:[{number:0,isOmittable:!1},{number:3,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:9,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!1},{number:3,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:11,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:3,isOmittable:!1},{number:5,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:13,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:3,isOmittable:!1},{number:5,isOmittable:!0},{number:7,isOmittable:!0},{number:9,isOmittable:!1},{number:10,isOmittable:!1}]}],diminished:[{extension:null,intervals:[{number:0,isOmittable:!1},{number:3,isOmittable:!1},{number:6,isOmittable:!1}]},{extension:7,intervals:[{number:0,isOmittable:!1},{number:3,isOmittable:!1},{number:6,isOmittable:!1},{number:9,isOmittable:!1}]},{extension:9,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!1},{number:3,isOmittable:!1},{number:6,isOmittable:!1},{number:9,isOmittable:!1}]},{extension:11,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:3,isOmittable:!1},{number:5,isOmittable:!1},{number:6,isOmittable:!1},{number:9,isOmittable:!1}]}],augmented:[{extension:null,intervals:[{number:0,isOmittable:!1},{number:4,isOmittable:!1},{number:8,isOmittable:!1}]},{extension:7,intervals:[{number:0,isOmittable:!1},{number:4,isOmittable:!1},{number:8,isOmittable:!1},{number:10,isOmittable:!1}]},{extension:9,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!1},{number:4,isOmittable:!1},{number:8,isOmittable:!1},{number:10,isOmittable:!1}]},{extension:11,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!1},{number:5,isOmittable:!1},{number:8,isOmittable:!1},{number:10,isOmittable:!1}]},{extension:13,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!1},{number:5,isOmittable:!0},{number:8,isOmittable:!1},{number:9,isOmittable:!1},{number:10,isOmittable:!1}]}]}};class _{constructor({root:s="",quality:i="",extension:n="",additionalQuality:a="",suspension:r="",alteration:c="",alterations:u=[],symbol:o="",notes:d=[],intervals:h=[],extensions:g=[],modifications:f=[],missingFromSelected:x=[],missingChordIntervals:b=[],isAbstract:k=!1,isValid:N=!0,isExactMatch:S=!1}={}){this.root=s,this.quality=i,this.extension=n,this.additionalQuality=a,this.suspension=r,this.alteration=c,this.alterations=u,this.symbol=o,this.notes=d,this.intervals=h,this.extensions=g,this.modifications=f,this.missingFromSelected=x,this.missingChordIntervals=b,this.isAbstract=k,this.isValid=N,this.isExactMatch=S}generateNotes(){let s=[],i=A.notes.indexOf(this.root);for(let n=0;n<this.intervals.length;n++){let a=this.intervals[n].number+i;for(;a>=12;)a-=12;s.push(A.notes[a])}return s}intervalsMatchExactly(s){return this.intervals.length===s.length&&this.intervals.every(i=>s.includes(i.number))}extendOrAlter(s){if(this.extension===5){this.isValid=!1;return}let i="";switch(s){case 1:this.extension>=9?i="discard":(this.alterations.push("addb9"),i="add");break;case 2:this.quality==="major"||this.quality==="default"?this.missingChordIntervals.includes(4)?(this.suspension="sus2",i="replaceThird"):this.extension===null?(this.alterations.push("add9"),i="add"):i="discard":this.quality==="minor"?(this.alterations.push("add9"),i="add"):this.quality==="diminished"&&(this.alterations.push("add9"),i="add");break;case 3:this.extension>=9?i="discard":(this.alterations.push("add#9"),i="add");break;case 4:(this.quality==="minor"||this.quality==="diminished")&&(i="discard");break;case 5:(this.quality==="major"||this.quality==="default")&&(this.suspension==="sus2"?(this.suspension="sus4",this.alterations.push("add9"),i="add"):this.missingChordIntervals.includes(4)?(this.suspension="sus4",i="replaceThird"):this.extension===null||this.extension===7?(this.alterations.push("add11"),i="add"):i="discard");break;case 6:this.quality==="diminished"?i="discard":this.quality==="augmented"?(this.alterations.push("add#11"),i="add"):this.missingChordIntervals.includes(7)?(this.alterations.push("b5"),i="replace"):(this.alterations.push("add#11"),i="add");break;case 7:i="discard";break;case 8:this.quality==="augmented"?i="discard":this.quality==="diminished"?(this.alterations.push("addb13"),i="add"):this.missingChordIntervals.includes(7)?(this.alterations.push("#5"),i="replace"):(this.alterations.push("addb13"),i="add");break;case 9:this.quality==="diminished"||this.extension>=7?i="discard":(this.extension=6,i="add");break;case 10:this.extension>=7||this.quality==="major"&&this.extension===null||this.quality==="minor"&&this.extension===null?i="discard":(this.alterations.push("b7"),i="add");break;case 11:this.quality==="major"&&this.extension===null?i="discard":this.quality==="minor"&&(this.quality="mMaj",i="add");break}switch(i){case"add":this.intervals.push({number:s,isOmittable:!1});break;case"replace":this.intervals=this.intervals.filter(n=>!A.similarIntervals[s].includes(n.number)),this.intervals.push({number:s,isOmittable:!1});break;case"replaceThird":this.intervals.push({number:s,isOmittable:!1}),this.intervals=this.intervals.filter(n=>n.number!==4);break;case"discard":this.isValid=!1;break}}canModifySimilar(s){return this.intervals.some(i=>A.similarIntervals[s].includes(i.number)&&i.isOmittable)}hasSimilarInterval(s){switch(s){case 1:case 2:return this.hasSecond();case 3:case 4:return this.hasThird();case 5:return this.hasFourth();case 6:case 7:case 8:return this.hasFifth();case 9:return this.hasSixth();case 10:case 11:return this.hasSeventh();default:return!1}}getMissingIntervalsFromSelected(s){let i=[],n=this.intervals.map(a=>a.number);for(let a of s)n.includes(a)||i.push(a);return this.missingFromSelected=i,i}getMissingChordIntervals(s){let i=[];for(let n of this.intervals)s.includes(n.number)||i.push(n.number);return this.missingChordIntervals=i,i}handleMissingChordIntervals(s){for(let i of s)switch(this.quality){case"default":case"major":console.log("setting no3 or no5"),i===4&&(this.no3=!0),i===7&&!this.alterations.includes("b5")&&!this.alterations.includes("#5")&&(this.no5=!0);break;case"minor":console.log("setting no3 or no5"),i===3&&(this.no3=!0),i===7&&!this.alterations.includes("b5")&&!this.alterations.includes("#5")&&(this.no5=!0);break;case"diminished":console.log("setting no3 or no5"),i===3&&(this.no3=!0),i===6&&(this.no5=!0);break;case"augmented":console.log("setting no3 or no5"),i===4&&(this.no3=!0),i===8&&(this.no5=!0);break}}prepareForDisplay(){switch(this.quality){case"default":this.quality="";break;case"major":this.extension===5||this.extension===6||this.extension===null?this.quality="":this.quality="maj";break;case"minor":this.quality="min";break;case"diminished":this.quality="dim";break;case"augmented":this.quality="aug";break}this.no3&&this.suspension!=="sus2"&&this.suspension!=="sus4"&&this.alterations.push("no3"),this.no5&&this.alterations.push("no5"),this.sortAlterations(),this.alteration=this.alterations.toString(),this.notes.length===0&&(this.notes=this.generateNotes())}sortAlterations(){function s(n){return n.startsWith("add")?"add":n.startsWith("no")?"no":n.includes("b")||n.includes("#")?n[0]:""}const i={b:1,"#":1,add:2,no:3};this.alterations.sort((n,a)=>{const r=s(n),c=s(a);return i[r]<i[c]?-1:i[r]>i[c]?1:0})}isAug(){return this.intervals.includes(8)}isDim(){return this.intervals.includes(6)}hasSecond(){return this.intervals.includes(1)||this.intervals.includes(2)}hasThird(){return this.intervals.includes(3)||this.intervals.includes(4)}hasFourth(){return this.intervals.includes(5)}hasFifth(){return this.intervals.includes(6)||this.intervals.includes(7)||this.intervals.includes(8)}hasSixth(){return this.intervals.includes(9)}hasSeventh(){return this.intervals.includes(10)||this.intervals.includes(11)}removeFifths(s){s?this.intervals.splice(this.intervals.indexOf(s),1):this.intervals=this.intervals.filter(i=>i<6||i>8)}alterFifthTo(s){let i=this.getFifths();i.length===1&&(this.intervals.splice(this.intervals.indexOf(i[0]),1),this.intervals.push(s))}addExtension(s){}getFifths(){return this.intervals.filter(s=>s===6||s===7||s===8)}}function bs(e,s){console.log("getChord()"),console.log("selectedNotes: "+e);const i=[];let n=A.chordQualities;if(e.length===0)return[new _({root:"N.C. (no chord)"})];if(e.length===1)return[new _({root:e[0],quality:"major",notes:[e[0]],intervals:[0]})];let a=gs(e),r=e[0];for(let c in n)for(let u of n[c]){const o=c,d=u.extension,h=u.intervals.slice();let g=new _({root:r,quality:o,extension:d,intervals:h}),f=g.getMissingIntervalsFromSelected(a),x=g.getMissingChordIntervals(a);for(let b of f)g.extendOrAlter(b);g.handleMissingChordIntervals(x),g.isValid&&i.push(g)}for(let c of i)c.prepareForDisplay(),c.intervalsMatchExactly(a)&&(c.isExactMatch=!0);return i.sort((c,u)=>c.intervals.length-a.length-(u.intervals.length-a.length)),i}function gs(e){let s=[],i,n,a=A.notes.indexOf(e[0]);for(let r=0;r<e.length;r++){for(n=A.notes.indexOf(e[r])-a;n<i;)n+=12;i=n,n>12&&(n-=12),s.includes(n)||s.push(n)}return s=s.sort((r,c)=>r-c),s}function ps(){const[e,s]=p.useState(["chord"]),i=m(c=>c.musicTheory.allNotes);m(c=>c.user.globalSettings.chordScaleIdentifier.identify);let n=ls(i),a=bs(n);console.log(a),e.includes("chord");function r(c){if(e.includes(c)){let u=e.filter(o=>o!==c);s(u)}else s([...e,c])}return t.jsxs("div",{id:"ChordScaleIdentifier",children:[t.jsxs("div",{className:"settingsBar",children:[t.jsxs("button",{onClick:()=>r("chord"),children:[e.includes("chord")?"☑":"☐"," Chord"]}),t.jsxs("button",{onClick:()=>r("scale"),children:[e.includes("scale")?"☑":"☐"," Scale"]})]}),t.jsxs("div",{className:"content",children:[n,e.includes("chord")&&t.jsx(t.Fragment,{children:t.jsx(os,{title:"Chord",settingsModal:"identifyChordFilters",children:a.map((c,u)=>t.jsx(fs,{chord:c},c.symbol+u))})}),e.includes("scale")&&t.jsx(t.Fragment,{children:t.jsx("p",{children:"Scales"})})]})]})}function xs(){return t.jsx("div",{id:"ChordScaleDictionary",children:"ChordScaleDictionary"})}function vs(){return t.jsx("div",{id:"ChordProgressionMaker",children:"ChordProgressionMaker"})}function js(e){e.style.maxHeight=null}function ys(e){e.style.maxHeight=e.scrollHeight+"px"}function Cs({showing:e}){const s=M(),i=m(o=>o.musicTheory.markNotes),n=m(o=>o.musicTheory.labelNotes),a=m(o=>o.musicTheory.fretPosition),r=m(o=>o.musicTheory.highlightNotes),c=m(o=>o.fretboard.nutIsFixed);p.useEffect(()=>{let o=document.getElementById("InstrumentMenu");e?ys(o):js(o)},[e]);function u(){s(Te(!c))}return t.jsxs("div",{id:"InstrumentMenu",children:[t.jsxs("div",{className:"settings",children:[t.jsxs("div",{className:"setting dropdown markNotes",children:[t.jsx("p",{children:"Mark notes"}),t.jsx("button",{children:i}),t.jsxs("div",{className:"dropdown-content",children:[t.jsx("button",{onClick:()=>s($("single")),children:"Single"}),t.jsx("button",{onClick:()=>s($("none")),children:"None"}),t.jsx("button",{onClick:()=>s($("all")),children:"All"}),t.jsx("button",{onClick:()=>s($("identical")),children:"Identical"}),t.jsx("button",{onClick:()=>s($("onePerString")),children:"One per string"})]})]}),t.jsxs("div",{className:"setting dropdown labelNotes",children:[t.jsx("p",{children:"Label notes"}),t.jsx("button",{children:n}),t.jsxs("div",{className:"dropdown-content",children:[t.jsx("button",{onClick:()=>s(B("note")),children:"Note"}),t.jsx("button",{onClick:()=>s(B("interval")),children:"Interval"}),t.jsx("button",{onClick:()=>s(B("degree")),children:"Degree"}),t.jsx("button",{onClick:()=>s(B("doReMi")),children:"DoReMi"})]})]}),t.jsxs("div",{className:"setting dropdown fretPositions",children:[t.jsx("p",{children:"Position"}),t.jsx("button",{children:a}),t.jsxs("div",{className:"dropdown-content",children:[t.jsx("button",{children:"All"}),t.jsx("button",{children:"1"}),t.jsx("button",{children:"2"}),t.jsx("button",{children:"3"}),t.jsx("button",{children:"4"}),t.jsx("button",{children:"5"})]})]}),t.jsxs("div",{className:"setting dropdown highlight",children:[t.jsx("p",{children:"Highlight"}),t.jsx("button",{children:r}),t.jsxs("div",{className:"dropdown-content highlight",children:[t.jsx("button",{children:"All"}),t.jsx("button",{children:"None"}),t.jsx("button",{onClick:()=>s,children:"Scale"})]})]}),t.jsxs("div",{className:"setting dropdown clear",children:[t.jsx("p",{children:"Clear"}),t.jsx("button",{children:"All"}),t.jsxs("div",{className:"dropdown-content clear",children:[t.jsx("button",{onClick:()=>s(deselectNotes("all")),children:"All"}),t.jsx("button",{onClick:()=>s(deselectNotes("marked")),children:"Marked"}),t.jsx("button",{onClick:()=>s(deselectNotes("highlighted")),children:"Highlighted"})]})]}),t.jsxs("div",{className:"setting dropdown fixNut",children:[t.jsx("p",{children:"Fixed nut"}),t.jsx("button",{className:c?"nutFixedButton active":"nutFixedButton",onClick:()=>u(),children:c?"Fixed":"Normal"})]})]}),t.jsx("button",{className:"closeButton",children:"🎵"})]})}function ks(){const e=M();return t.jsx(je,{id:"IdentifierChordFiltersModal",title:"Chord layout",onClose:()=>e(le()),children:t.jsxs("div",{className:"identifierChordFilters",children:[t.jsx("p",{children:"□ Show notes"}),t.jsx("p",{children:"□ Only show exact chords"}),t.jsx("p",{children:"□ Show chords that are 1 note off"}),t.jsx("p",{children:"□ Show chords that are 2 note off"}),t.jsx("p",{children:"□ Show all possible chords, closest first"}),"-Intervals on/off + intervals style -Notes in chord -Aliases"]})})}function Ss(){const e=m(s=>s.ui.activeModal);return e==="keyChange"?t.jsx(rs,{}):e==="identifyChordFilters"?t.jsx(ks,{}):null}function Os(){const e=M(),s=m(a=>a.fretboard.fretboardIsReady),i=m(a=>a.ui.instrumentView);m(a=>a.ui.menus);const n=[{tabTitle:"Identify",tabContent:t.jsx(ps,{})},{tabTitle:"Dictionary",tabContent:t.jsx(xs,{})},{tabTitle:"Progression",tabContent:t.jsx(vs,{})}];return p.useEffect(()=>{let a=ns();e(Me(a))},[e]),p.useEffect(()=>{function a(){e(Le(Ie()))}return window.addEventListener("resize",ee(a,20)),()=>{window.removeEventListener("resize",ee(a,20))}},[e]),s?t.jsxs("div",{className:"appLayout",children:[t.jsx(Zt,{}),t.jsx(pe,{}),t.jsx(Ss,{}),t.jsx(Cs,{showing:!0}),i.activeInstrument==="fretboard"?t.jsx(is,{}):null,t.jsx(as,{tabs:n})]}):t.jsx(Fe,{})}Os.propTypes={view:D.string};export{Os as default};
