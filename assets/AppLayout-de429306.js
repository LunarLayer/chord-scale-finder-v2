import{R as B,u as Fe,c as Ee,n as j,m as de,a as _,t as Me,g as Ie,d as Pe,b as Y,e as fe,i as J,f as K,h as Q,j as H,k as We,l as Oe,o as Ve,r as he,p as De,s as Re,q as Ge,v as Be,w as _e,x as me,y as V,z as r,A as y,B as m,C as ge,D as Ke,E as He,F as ze,G as R,H as a,I as Ze,J as qe,K as w,L as Ue,M as F,N as D,O as Xe,P as ne,Q as Ye,S as Je}from"./index-ba5ccf98.js";import Qe from"./Loader-f2c43cb4.js";function pe(e=B){const t=e===B?Fe:Ee(e);return function(){const{store:n}=t();return n}}const et=pe();function tt(e=B){const t=e===B?et:pe(e);return function(){return t().dispatch}}const I=tt();var nt=e=>{const t=e.reduce((s,n)=>{const i=j(n).chroma;return i!==void 0&&(s[i]=s[i]||j(n).name),s},{});return s=>t[s]};function st(e,t={}){const s=e.map(i=>j(i).pc).filter(i=>i);return j.length===0?[]:ut(s,1,t).filter(i=>i.weight).sort((i,o)=>o.weight-i.weight).map(i=>i.name)}var z={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},Z=e=>t=>!!(t&e),rt=Z(z.anyThirds),it=Z(z.perfectFifth),ot=Z(z.anySeventh),at=Z(z.nonPerfectFifths);function ct(e){const t=parseInt(e.chroma,2);return rt(t)&&it(t)&&ot(t)}function lt(e){const t=parseInt(e,2);return at(t)?e:(t|16).toString(2)}function ut(e,t,s){const n=e[0],i=j(n).chroma,o=nt(e),l=de(e,!1),c=[];return l.forEach((u,d)=>{const f=s.assumePerfectFifth&&lt(u);_().filter(h=>s.assumePerfectFifth&&ct(h)?h.chroma===f:h.chroma===u).forEach(h=>{const p=h.aliases[0],g=o(d);d!==i?c.push({weight:.5*t,name:`${g}${p}/${n}`}):c.push({weight:1*t,name:`${g}${p}`})})}),c}var U={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function ee(e){const[t,s,n,i]=Me(e);return t===""?["",e]:t==="A"&&i==="ug"?["","aug"]:[t+s,n+i]}function M(e){if(e==="")return U;if(Array.isArray(e)&&e.length===2)return G(e[1],e[0]);{const[t,s]=ee(e),n=G(s,t);return n.empty?G(e):n}}function G(e,t,s){const n=Ie(e),i=j(t||""),o=j(s||"");if(n.empty||t&&i.empty||s&&o.empty)return U;const l=Pe(i.pc,o.pc),c=n.intervals.indexOf(l)+1;if(!o.empty&&!c)return U;const u=Array.from(n.intervals);for(let h=1;h<c;h++){const p=u[0][0],g=u[0][1],N=parseInt(p,10)+7;u.push(`${N}${g}`),u.shift()}const d=i.empty?[]:u.map(h=>Y(i,h));e=n.aliases.indexOf(e)!==-1?e:n.aliases[0];const f=`${i.empty?"":i.pc}${e}${o.empty||c<=1?"":"/"+o.pc}`,v=`${t?i.pc+" ":""}${n.name}${c>1&&s?" over "+o.pc:""}`;return{...n,name:v,symbol:f,type:n.name,root:o.name,intervals:u,rootDegree:c,tonic:i.name,notes:d}}var dt=fe("Chord.chord","Chord.get",M);function ft(e,t){const[s,n]=ee(e);return s?Y(s,t)+n:e}function ht(e){const t=M(e),s=J(t.chroma);return K().filter(n=>s(n.chroma)).map(n=>n.name)}function mt(e){const t=M(e),s=J(t.chroma);return _().filter(n=>s(n.chroma)).map(n=>t.tonic+n.aliases[0])}function gt(e){const t=M(e),s=Q(t.chroma);return _().filter(n=>s(n.chroma)).map(n=>t.tonic+n.aliases[0])}function pt(e){const{intervals:t,tonic:s}=M(e),n=H(t,s);return i=>i?n(i>0?i-1:i):""}function vt(e){const{intervals:t,tonic:s}=M(e);return H(t,s)}var X={getChord:G,get:M,detect:st,chordScales:ht,extended:mt,reduced:gt,tokenize:ee,transpose:ft,degrees:pt,steps:vt,chord:dt},xt={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function ve(e){if(typeof e!="string")return["",""];const t=e.indexOf(" "),s=j(e.substring(0,t));if(s.empty){const i=j(e);return i.empty?["",e]:[i.name,""]}const n=e.substring(s.name.length+1);return[s.name,n.length?n:""]}var yt=We;function L(e){const t=Array.isArray(e)?e:ve(e),s=j(t[0]).name,n=Oe(t[1]);if(n.empty)return xt;const i=n.name,o=s?n.intervals.map(c=>Y(s,c)):[],l=s?s+" "+i:i;return{...n,name:l,type:i,tonic:s,notes:o}}var bt=fe("Scale.scale","Scale.get",L);function Ct(e,t={}){const s=Ve(e),n=j(t.tonic??e[0]??""),i=n.chroma;if(i===void 0)return[];const o=s.split("");o[i]="1";const l=he(i,o).join(""),c=K().find(d=>d.chroma===l),u=[];return c&&u.push(n.name+" "+c.name),t.match==="exact"||xe(l).forEach(d=>{u.push(n.name+" "+d)}),u}function jt(e){const t=L(e),s=Q(t.chroma);return _().filter(n=>s(n.chroma)).map(n=>n.aliases[0])}function xe(e){const t=De(e)?e:L(e).chroma,s=J(t);return K().filter(n=>s(n.chroma)).map(n=>n.name)}function St(e){const t=Q(L(e).chroma);return K().filter(s=>t(s.chroma)).map(s=>s.name)}function ye(e){const t=e.map(i=>j(i).pc).filter(i=>i),s=t[0],n=Re(t);return he(n.indexOf(s),n)}function Nt(e){const t=L(e);if(t.empty)return[];const s=t.tonic?t.notes:t.intervals;return de(t.chroma).map((n,i)=>{const o=L(n).name;return o?[s[i],o]:["",""]}).filter(n=>n[0])}function kt(e){const t=Array.isArray(e)?ye(e):L(e).notes,s=t.map(n=>j(n).chroma);return n=>{const i=typeof n=="number"?j(Be(n)):j(n),o=i.height;if(o===void 0)return;const l=o%12,c=s.indexOf(l);if(c!==-1)return _e(i.name,t[c])}}function wt(e){const t=kt(e);return(s,n)=>{const i=j(s).height,o=j(n).height;return i===void 0||o===void 0?[]:Ge(i,o).map(t).filter(l=>l)}}function Tt(e){const{intervals:t,tonic:s}=L(e),n=H(t,s);return i=>i?n(i>0?i-1:i):""}function $t(e){const{intervals:t,tonic:s}=L(e);return H(t,s)}var Lt={degrees:Tt,detect:Ct,extended:xe,get:L,modeNames:Nt,names:yt,rangeOf:wt,reduced:St,scaleChords:jt,scaleNotes:ye,steps:$t,tokenize:ve,scale:bt};function At(e,t){let n=.1+.5*(1-e/t*100/100);var i="";let l=n/100;d(0,0);for(let f=1;f<=99;f++)n-=l,f%2===0?d(f,-n):d(f,n);d(100,0);let c=document.styleSheets[0],u=null;for(let f=0;f<c.cssRules.length;f++)if(c.cssRules[f].name==="dynamicSkew"){u=c.cssRules[f];break}u?u.cssText=`@keyframes stringVibration { ${i} }`:c.insertRule(`@keyframes stringVibration { ${i} }`,c.cssRules.length);function d(f,v){i+=`${f}% {
      transform: skewY(${v}deg);
    }`}}var be={exports:{}},Ft="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Et=Ft,Mt=Et;function Ce(){}function je(){}je.resetWarningCache=Ce;var It=function(){function e(n,i,o,l,c,u){if(u!==Mt){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:je,resetWarningCache:Ce};return s.PropTypes=s,s};be.exports=It();var Pt=be.exports;const O=me(Pt);function Wt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Se=Wt,Ot=typeof V=="object"&&V&&V.Object===Object&&V,Vt=Ot,Dt=Vt,Rt=typeof self=="object"&&self&&self.Object===Object&&self,Gt=Dt||Rt||Function("return this")(),Ne=Gt,Bt=Ne,_t=function(){return Bt.Date.now()},Kt=_t,Ht=/\s/;function zt(e){for(var t=e.length;t--&&Ht.test(e.charAt(t)););return t}var Zt=zt,qt=Zt,Ut=/^\s+/;function Xt(e){return e&&e.slice(0,qt(e)+1).replace(Ut,"")}var Yt=Xt,Jt=Ne,Qt=Jt.Symbol,ke=Qt,se=ke,we=Object.prototype,en=we.hasOwnProperty,tn=we.toString,W=se?se.toStringTag:void 0;function nn(e){var t=en.call(e,W),s=e[W];try{e[W]=void 0;var n=!0}catch{}var i=tn.call(e);return n&&(t?e[W]=s:delete e[W]),i}var sn=nn,rn=Object.prototype,on=rn.toString;function an(e){return on.call(e)}var cn=an,re=ke,ln=sn,un=cn,dn="[object Null]",fn="[object Undefined]",ie=re?re.toStringTag:void 0;function hn(e){return e==null?e===void 0?fn:dn:ie&&ie in Object(e)?ln(e):un(e)}var mn=hn;function gn(e){return e!=null&&typeof e=="object"}var pn=gn,vn=mn,xn=pn,yn="[object Symbol]";function bn(e){return typeof e=="symbol"||xn(e)&&vn(e)==yn}var Cn=bn,jn=Yt,oe=Se,Sn=Cn,ae=0/0,Nn=/^[-+]0x[0-9a-f]+$/i,kn=/^0b[01]+$/i,wn=/^0o[0-7]+$/i,Tn=parseInt;function $n(e){if(typeof e=="number")return e;if(Sn(e))return ae;if(oe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=oe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=jn(e);var s=kn.test(e);return s||wn.test(e)?Tn(e.slice(2),s?2:8):Nn.test(e)?ae:+e}var Ln=$n,An=Se,q=Kt,ce=Ln,Fn="Expected a function",En=Math.max,Mn=Math.min;function In(e,t,s){var n,i,o,l,c,u,d=0,f=!1,v=!1,h=!0;if(typeof e!="function")throw new TypeError(Fn);t=ce(t)||0,An(s)&&(f=!!s.leading,v="maxWait"in s,o=v?En(ce(s.maxWait)||0,t):o,h="trailing"in s?!!s.trailing:h);function p(x){var $=n,P=i;return n=i=void 0,d=x,l=e.apply(P,$),l}function g(x){return d=x,c=setTimeout(k,t),f?p(x):l}function N(x){var $=x-u,P=x-d,te=t-$;return v?Mn(te,o-P):te}function T(x){var $=x-u,P=x-d;return u===void 0||$>=t||$<0||v&&P>=o}function k(){var x=q();if(T(x))return A(x);c=setTimeout(k,N(x))}function A(x){return c=void 0,h&&n?p(x):(n=i=void 0,l)}function C(){c!==void 0&&clearTimeout(c),d=0,n=u=i=c=void 0}function b(){return c===void 0?l:A(q())}function S(){var x=q(),$=T(x);if(n=arguments,i=this,u=x,$){if(c===void 0)return g(u);if(v)return clearTimeout(c),c=setTimeout(k,t),p(u)}return c===void 0&&(c=setTimeout(k,t)),l}return S.cancel=C,S.flush=b,S}var Pn=In;const le=me(Pn);const Wn=()=>r.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M12.0355 8.52113C12.4261 8.1306 13.0674 8.12674 13.3881 8.57637C14.0882 9.55788 14.5 10.7592 14.5 12.0567C14.5 13.3541 14.0882 14.5554 13.3881 15.537C13.0674 15.9866 12.4261 15.9827 12.0355 15.5922C11.645 15.2017 11.6586 14.5725 11.9408 14.0978C12.296 13.5002 12.5 12.8023 12.5 12.0567C12.5 11.3111 12.296 10.6131 11.9408 10.0156C11.6586 9.54084 11.645 8.91165 12.0355 8.52113Z",fill:"#000000"}),r.jsx("path",{d:"M14.864 5.69316C15.2545 5.30263 15.8921 5.29976 16.2419 5.72712C17.6532 7.45118 18.5 9.65526 18.5 12.0571C18.5 14.459 17.6532 16.6631 16.2419 18.3871C15.8921 18.8145 15.2545 18.8116 14.864 18.4211C14.4734 18.0306 14.4792 17.4007 14.8183 16.9648C15.8723 15.6098 16.5 13.9068 16.5 12.0571C16.5 10.2075 15.8723 8.50445 14.8183 7.14944C14.4792 6.71351 14.4734 6.08368 14.864 5.69316Z",fill:"#000000"}),r.jsx("path",{d:"M17.6929 2.79322C18.0835 2.40268 18.7197 2.40049 19.0815 2.81776C21.2113 5.2739 22.5002 8.47903 22.5002 11.9852C22.5002 15.5312 21.1818 18.7693 19.0085 21.2361C18.6434 21.6505 18.0073 21.6433 17.6198 21.2497C17.2324 20.8562 17.2409 20.2256 17.6011 19.8069C19.408 17.7063 20.5002 14.9733 20.5002 11.9852C20.5002 9.03126 19.4329 6.32661 17.6628 4.23586C17.306 3.81436 17.3024 3.18373 17.6929 2.79322Z",fill:"#000000"}),r.jsx("path",{d:"M10 16.5858V7.41421C10 6.52331 8.92286 6.07714 8.29289 6.70711L6.29289 8.70711C6.10536 8.89464 5.851 9 5.58579 9H4C3.44772 9 3 9.44772 3 10V14C3 14.5523 3.44772 15 4 15H5.58579C5.851 15 6.10536 15.1054 6.29289 15.2929L8.29289 17.2929C8.92286 17.9229 10 17.4767 10 16.5858Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"})]}),ue=()=>r.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M13.0355 8.52113C13.4261 8.1306 14.0674 8.12674 14.3881 8.57637C15.0882 9.55788 15.5 10.7592 15.5 12.0567C15.5 13.3541 15.0882 14.5554 14.3881 15.537C14.0674 15.9866 13.4261 15.9827 13.0355 15.5922C12.645 15.2017 12.6586 14.5725 12.9408 14.0978C13.296 13.5002 13.5 12.8023 13.5 12.0567C13.5 11.3111 13.296 10.6131 12.9408 10.0156C12.6586 9.54084 12.645 8.91165 13.0355 8.52113Z",fill:"#000000"}),r.jsx("path",{d:"M15.864 5.69316C16.2545 5.30263 16.8921 5.29976 17.2419 5.72712C18.6532 7.45118 19.5 9.65526 19.5 12.0571C19.5 14.459 18.6532 16.6631 17.2419 18.3871C16.8921 18.8145 16.2545 18.8116 15.864 18.4211C15.4734 18.0306 15.4792 17.4007 15.8183 16.9648C16.8723 15.6098 17.5 13.9068 17.5 12.0571C17.5 10.2075 16.8723 8.50445 15.8183 7.14944C15.4792 6.71351 15.4734 6.08368 15.864 5.69316Z",fill:"#000000"}),r.jsx("path",{d:"M11 16.5858V7.41421C11 6.52331 9.92286 6.07714 9.29289 6.70711L7.29289 8.70711C7.10536 8.89464 6.851 9 6.58579 9H5C4.44772 9 4 9.44772 4 10V14C4 14.5523 4.44772 15 5 15H6.58579C6.851 15 7.10536 15.1054 7.29289 15.2929L9.29289 17.2929C9.92286 17.9229 11 17.4767 11 16.5858Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"})]}),On=()=>r.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M15.0355 8.52113C15.4261 8.1306 16.0674 8.12674 16.3881 8.57637C17.0882 9.55788 17.5 10.7592 17.5 12.0567C17.5 13.3541 17.0882 14.5554 16.3881 15.537C16.0674 15.9866 15.4261 15.9827 15.0355 15.5922C14.645 15.2017 14.6586 14.5725 14.9408 14.0978C15.296 13.5002 15.5 12.8023 15.5 12.0567C15.5 11.3111 15.296 10.6131 14.9408 10.0156C14.6586 9.54084 14.645 8.91165 15.0355 8.52113Z",fill:"#000000"}),r.jsx("path",{d:"M13 16.5858V7.41421C13 6.52331 11.9229 6.07714 11.2929 6.70711L9.29289 8.70711C9.10536 8.89464 8.851 9 8.58579 9H7C6.44772 9 6 9.44772 6 10V14C6 14.5523 6.44772 15 7 15H8.58579C8.851 15 9.10536 15.1054 9.29289 15.2929L11.2929 17.2929C11.9229 17.9229 13 17.4767 13 16.5858Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"})]}),Vn=()=>r.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M11 16.5858V7.41421C11 6.52331 9.92286 6.07714 9.29289 6.70711L7.29289 8.70711C7.10536 8.89464 6.851 9 6.58579 9H5C4.44772 9 4 9.44772 4 10V14C4 14.5523 4.44772 15 5 15H6.58579C6.851 15 7.10536 15.1054 7.29289 15.2929L9.29289 17.2929C9.92286 17.9229 11 17.4767 11 16.5858Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M20 9.5L15 14.5",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M20 14.5L15 9.5",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"})]}),Dn=()=>r.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M12 16.5858V7.41421C12 6.52331 10.9229 6.07714 10.2929 6.70711L8.29289 8.70711C8.10536 8.89464 7.851 9 7.58579 9H6C5.44772 9 5 9.44772 5 10V14C5 14.5523 5.44772 15 6 15H7.58579C7.851 15 8.10536 15.1054 8.29289 15.2929L10.2929 17.2929C10.9229 17.9229 12 17.4767 12 16.5858Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M16.5361 13.5353V8",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M17.5361 16.598C17.5361 17.1503 17.0884 17.598 16.5361 17.598C15.9838 17.598 15.5361 17.1503 15.5361 16.598C15.5361 16.0457 15.9838 15.598 16.5361 15.598C17.0884 15.598 17.5361 16.0457 17.5361 16.598Z",fill:"#000000"})]});function Rn(){return r.jsx("div",{id:"Spinner"})}function Gn(){const e=y.useRef(null),[t,s]=y.useState(!0),[n,i]=y.useState(Dn),[o,l]=y.useState(!1),[c,u]=y.useState(null),[d,f]=y.useState(8),v=m(g=>g.user.soundFile);y.useEffect(()=>{const g=setInterval(()=>{ge.state()==="loaded"&&(s(!1),clearInterval(g),i(ue))},50);return()=>{clearInterval(g)}},[v]);function h(){if(!t){c&&clearTimeout(c);const g=setTimeout(()=>{l(!1)},3e3);u(g),l(!o)}}function p(){if(!t){c&&clearTimeout(c);let g=parseInt(e.current.value);f(g),g===0&&i(Vn),g>0&&g<=3&&i(On),g>3&&g<=7&&i(ue),g>7&&g<=10&&i(Wn);let N=g/10;Ke.Howler.volume(N);const T=setTimeout(()=>{l(!1)},3e3);u(T)}}return r.jsxs("div",{id:"VolumeMixer",className:`${o?"expanded":""} ${t?"loadingSound":""}`,children:[r.jsxs("button",{className:"volumeButton",onClick:()=>h(),children:[t?r.jsx(Rn,{}):null,n]}),r.jsx("div",{className:"volumeSlider",children:r.jsx("input",{className:"slider",ref:e,type:"range",orient:"vertical",value:d,min:"0",max:"10",onChange:p})})]})}function Bn(){return r.jsx("nav",{id:"Navbar",children:r.jsxs("div",{className:"flex-wrapper",children:[r.jsxs("div",{className:"userSettings",children:[r.jsx("button",{children:"Login"}),r.jsx("button",{children:"Projects"})]}),r.jsxs("div",{className:"wrapper",children:[r.jsx(Gn,{}),r.jsx("button",{children:"⚙️"})]})]})})}function Te(){const e=He.createRef(),t=I(),s=m(o=>o.fretboard.fretCount),n=m(o=>o.fretboard.fretCap);function i(){t(ze(parseInt(e.current.value)))}return r.jsx("input",{id:"fretCount-slider",ref:e,type:"range",value:s,min:"0",max:n,onChange:i})}Te.propTypes={activeView:O.string,setActiveView:O.func};function $e(){const e=I();m(n=>n.ui.currentViewSection1);const t=m(n=>n.musicTheory.key);m(n=>n.ui.menus);const s=m(n=>n.fretboard.fretCount);return r.jsxs("div",{id:"toolbar",children:[r.jsxs("div",{className:"toolbar-item",children:[r.jsx("h4",{children:"Key"}),r.jsxs("button",{className:"keyChangeButton",onClick:()=>e(R("keyChange")),children:[t.tonic," ",t.type==="major"?"Major":"Minor"]})]}),r.jsxs("div",{className:"toolbar-item",children:[r.jsx("h4",{children:"Instrument"}),r.jsx("button",{onClick:()=>e(R("settings")),children:"🛠️"})]}),r.jsxs("div",{className:"toolbar-item",children:[r.jsx("h4",{children:"Menus"}),r.jsx("button",{onClick:()=>e(R("instrument")),children:"🎸"})]}),r.jsxs("div",{className:"toolbar-item",children:[r.jsxs("h4",{children:["Frets: ",s==0?"None":s]}),r.jsx(Te,{})]})]})}$e.propTypes={activeView:O.string,setActiveView:O.func};function _n(e,t,s,n){let i=s.type==="minor"?s.natural.scale:s.scale;if(t==="note"){for(let o of i)if(a.enharmonic(o)===e)return o.includes("b")?o.replace(/b/g,"♭"):o.includes("#")?o.replace(/#/g,"♯"):o;return n==="b"?a.enharmonic(e).replace(/b/g,"♭"):e.replace(/#/g,"♯")}if(t==="degree"){for(let o=0;o<i.length;o++)if(e===i[o])return o+1}else if(t==="interval"){for(let o=0;o<i.length;o++)if(e===i[o])return s.intervals[o]}else if(t==="doReMi"){for(let o=0;o<i.length;o++)if(e===s.scale[o]){if(o===0)return"Do";if(o===1)return"Re";if(o===2)return"Mi";if(o===3)return"Fa";if(o===4)return"So";if(o===5)return"La";if(o===6)return"Ti"}}return e}const Le=y.memo(function({pitchClass:t,octave:s,noteWidth:n,labelWidth:i,selected:o,highlighted:l,stringNumber:c}){const u=m(h=>h.musicTheory.labelNotes),d=m(h=>h.musicTheory.key),f=m(h=>h.musicTheory.accidental);let v=_n(t,u,d,f);return r.jsx("button",{className:`note ${o?"selected":""} ${l?"highlighted":""}`,"data-pitchclass":t,"data-octave":s,"data-stringnumber":c,style:{minWidth:n,maxWidth:n},children:r.jsx("span",{style:{minWidth:i,maxWidth:i,minHeight:i,maxHeight:i},children:v})})});function Kn({tuning:e,allNotes:t,nutIsFixed:s}){const n=m(o=>o.fretboard.notesLabelWidth),i=m(o=>o.fretboard.fretWidths);return r.jsx("div",{className:`nut ${s?"fixed":""}`,children:e.map((o,l)=>{let c=e.length-l,u=t.filter(v=>v.name===o.name&&v.appearsOnStrings.includes(c))[0],d=i[0],f=u.selectedOnStrings.includes(c);return r.jsx(Le,{pitchClass:u.pc,octave:u.oct,noteWidth:d,labelWidth:n,selected:f,highlighted:u.highlighted,stringNumber:c},`note${u.name}string${c}`)})})}let E=[{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null}];function Hn(e,t,s,n){let i=t;for(let d=0;d<s;d++)i-=n[d];At(i,t);let o=document.getElementsByClassName("stringVisual")[e],l=o.querySelector(".staticPart"),c=o.querySelector(".vibratingPart");E[e].timeout&&clearTimeout(E[e].timeout),c.classList.remove("animate"),c.offsetWidth,l.style.width=`calc(100% - ${i}px)`,c.style.width=`${i}px`,c.classList.add("animate");const u=[...E];u[e].isAnimating=!0,E=u,E[e].timeout=setTimeout(()=>{const d=[...E];d[e].isAnimating=!1,E=d,c.classList.remove("animate")},3e3)}function zn(e,t,s){let n,i,o=!1,l,c,u=[],d=document.getElementById("Fretboard"),f=document.getElementById("Strings"),v=document.getElementById("FretVisuals"),h=document.getElementById("StringVisuals");d.addEventListener("mousedown",p),d.addEventListener("touchstart",g);function p(C){u=[];let b;d.classList.contains("nutIsFixed")?(b=f.clientWidth!==f.scrollWidth,u.push(f),u.push(v),u.push(h)):(b=d.clientWidth!==d.scrollWidth,u.push(d)),b&&(document.addEventListener("mousemove",N),document.addEventListener("mouseup",k),n=C.pageX-d.offsetLeft,i=u[0].scrollLeft)}function g(C){u=[];let b;d.classList.contains("nutIsFixed")?(b=f.clientWidth!==f.scrollWidth,u.push(f),u.push(v),u.push(h)):(b=d.clientWidth!==d.scrollWidth,u.push(d)),b&&(document.addEventListener("touchmove",T),document.addEventListener("touchend",A),n=C.touches[0].pageX-d.offsetLeft,i=u[0].scrollLeft)}function N(C){if(C.preventDefault(),l=C.pageX-d.offsetLeft,c=l-n,Math.abs(c)>10&&(s(!0),o=!0),o)for(let S=0;S<u.length;S++)u[S].scrollLeft=i-c}function T(C){if(C.preventDefault(),l=C.touches[0].pageX-d.offsetLeft,c=l-n,Math.abs(c)>10&&(s(!0),o=!0),o)for(let S=0;S<u.length;S++)u[S].scrollLeft=i-c}function k(){if(o){let C=u[0].scrollLeft;for(let b=0;b<u.length;b++)e(t(C));o=!1}document.removeEventListener("mouseup",k),document.removeEventListener("mousemove",N)}function A(){if(o){let C=u[0].scrollLeft;for(let b=0;b<u.length;b++)e(t(C));o=!1}document.removeEventListener("touchEnd",A),document.removeEventListener("touchMove",T)}}function Ae(e,t){let s=0;for(let n=0;n<e.length;n++)s+=e[n];return s}function Zn(e,t){return e.filter(n=>n.appearsOnStrings.includes(t))}const qn=y.memo(function({notes:t,stringNumber:s}){const n=m(l=>l.fretboard.nutIsFixed),i=m(l=>l.fretboard.notesLabelWidth),o=m(l=>l.fretboard.fretWidths);return r.jsx("div",{className:"string","data-stringnumber":s,children:t.map((l,c)=>{let u=l.selectedOnStrings.includes(s),d=n?o[c+1]:o[c];return r.jsx(Le,{pitchClass:l.pc,octave:l.oct,noteWidth:d,labelWidth:i,selected:u,highlighted:l.highlighted,stringNumber:s},`note${l.name}string${s}`)})})});function Un({tuning:e,nutIsFixed:t,allNotes:s,fretWidths:n,width:i}){return r.jsx("div",{id:"Strings",style:{height:"145px",left:t?n[0]+"px":"auto",right:t?"unset":"auto",overflow:t?"hidden":"visible",maxWidth:t?i:"100%"},children:e.map((o,l)=>{let c=e.length-l,u=Zn(s,c);return t&&(u=u.slice(1)),r.jsx(qn,{notes:u,stringNumber:c},`string${c}`)})})}function Xn({style:e,theme:t,tuning:s,fretWidths:n,fretboardWidth:i,nutIsFixed:o,width:l}){let c=Ae(n);return r.jsxs(r.Fragment,{children:[r.jsx("div",{id:"StringVisuals",style:{width:o?i:c},children:s.map((u,d)=>{let f=s.length-d;return r.jsxs("div",{className:"stringVisual",style:{width:o?c:"auto"},children:[r.jsx("span",{className:"staticPart"}),r.jsx("span",{className:"vibratingPart"})]},`stringVisual${f}`)})}),o?r.jsx("div",{className:"nutVisual",style:{minWidth:n[0]+"px"}}):null,r.jsx("div",{id:"FretVisuals",className:`${o?"nutIsFixed":""}`,style:{left:o?n[0]+"px":"auto",right:o?0:"auto"},children:n.map((u,d)=>d===0&&o?null:r.jsxs("div",{className:!o&&d===0?"fretVisual nutVisual":"fretVisual",style:{minWidth:u,maxWidth:o?l:"auto"},children:[r.jsx("span",{className:"fretband"}),[3,5,7,9,15,17,19,21].includes(d)?r.jsx("span",{className:"fretMarker"}):null,[12,24].includes(d)?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"fretMarker"}),r.jsx("span",{className:"fretMarker"})]}):null,[24].includes(d)?r.jsx("span",{className:"fretband"}):null]},`fretVisual${d}`))})]})}function Yn(){const[e,t]=y.useState(!1),s=I(),n=m(h=>h.musicTheory.allNotes),i=m(h=>h.musicTheory.markNotes),o=m(h=>h.fretboard.tuning),l=m(h=>h.fretboard.fretWidths),c=m(h=>h.fretboard.nutIsFixed),u=m(h=>h.fretboard.fretboardWidth),d=m(h=>h.fretboard.fretboardStyle),f=m(h=>h.fretboard.fretboardTheme);y.useEffect(()=>{zn(s,Ze,t)},[s]);function v(h){if(e)t(!1);else{let p=h.target;if(p.parentNode.classList.contains("note")&&(p=p.parentNode),p.classList.contains("note")){let g=p.parentNode,N=p.getAttribute("data-octave"),T=p.getAttribute("data-pitchclass"),k=parseInt(p.getAttribute("data-stringnumber")),A=o.length-k,C=g.querySelectorAll(".note"),b=Array.from(C).indexOf(p),S=a.get(T+N),x=p.classList.contains("selected");i!=="none"&&s(qe({note:S,stringNumber:k,wasSelected:x})),ge.playNote(T+N,k);let $=Ae(l);Hn(A,$,b,l)}}}return r.jsxs("div",{id:"Fretboard",className:c?"nutIsFixed":"",style:{width:u,height:145},onClick:v,children:[c?r.jsx(Kn,{tuning:o,allNotes:n,nutIsFixed:c}):null,r.jsx(Un,{tuning:o,nutIsFixed:c,allNotes:n,fretWidths:l,width:u-l[0]}),r.jsx(Xn,{style:d,theme:f,tuning:o,fretWidths:l,fretboardWidth:u,nutIsFixed:c,width:u-l[0]})]})}function Jn(){let e={username:"Guest",key:w.majorKey("C"),scale:"major",tonality:"todo",accidental:"",allNotes:[{...a.get("C0")},{...a.get("C#0")},{...a.get("D0")},{...a.get("D#0")},{...a.get("E0")},{...a.get("F0")},{...a.get("F#0")},{...a.get("G0")},{...a.get("G#0")},{...a.get("A0")},{...a.get("A#0")},{...a.get("B0")},{...a.get("C1")},{...a.get("C#1")},{...a.get("D1")},{...a.get("D#1")},{...a.get("E1")},{...a.get("F1")},{...a.get("F#1")},{...a.get("G1")},{...a.get("G#1")},{...a.get("A1")},{...a.get("A#1")},{...a.get("B1")},{...a.get("C2")},{...a.get("C#2")},{...a.get("D2")},{...a.get("D#2")},{...a.get("E2")},{...a.get("F2")},{...a.get("F#2")},{...a.get("G2")},{...a.get("G#2")},{...a.get("A2")},{...a.get("A#2")},{...a.get("B2")},{...a.get("C3")},{...a.get("C#3")},{...a.get("D3")},{...a.get("D#3")},{...a.get("E3")},{...a.get("F3")},{...a.get("F#3")},{...a.get("G3")},{...a.get("G#3")},{...a.get("A3")},{...a.get("A#3")},{...a.get("B3")},{...a.get("C4")},{...a.get("C#4")},{...a.get("D4")},{...a.get("D#4")},{...a.get("E4")},{...a.get("F4")},{...a.get("F#4")},{...a.get("G4")},{...a.get("G#4")},{...a.get("A4")},{...a.get("A#4")},{...a.get("B4")},{...a.get("C5")},{...a.get("C#5")},{...a.get("D5")},{...a.get("D#5")},{...a.get("E5")},{...a.get("F5")},{...a.get("F#5")},{...a.get("G5")},{...a.get("G#5")},{...a.get("A5")},{...a.get("A#5")},{...a.get("B5")},{...a.get("C6")},{...a.get("C#6")},{...a.get("D6")},{...a.get("D#6")},{...a.get("E6")},{...a.get("F6")},{...a.get("F#6")},{...a.get("G6")},{...a.get("G#6")},{...a.get("A6")},{...a.get("A#6")},{...a.get("B6")},{...a.get("C7")},{...a.get("C#7")},{...a.get("D7")},{...a.get("D#7")},{...a.get("E7")},{...a.get("F7")},{...a.get("F#7")},{...a.get("G7")},{...a.get("G#7")},{...a.get("A7")},{...a.get("A#7")},{...a.get("B7")},{...a.get("C8")},{...a.get("C#8")},{...a.get("D8")},{...a.get("D#8")},{...a.get("E8")},{...a.get("F8")},{...a.get("F#8")},{...a.get("G8")},{...a.get("G#8")},{...a.get("A8")},{...a.get("A#8")},{...a.get("B8")}],instrument:"Fretboard",nutIsFixed:!1,soundFile:"jazzBass.mp3",instrumentStyle:"default",instrumentTheme:"default",coloredNotes:!1,tuning:[a.get("G2"),a.get("D2"),a.get("A1"),a.get("E1")],markNotes:"single",labelNotes:"note",fretPosition:"all",highlightNotes:void 0,assumePerfectFifth:!1,menus:{keyChange:{id:"KeyChangeMenu",showing:!1},instrument:{id:"InstrumentMenu",showing:!1},settings:{id:"SettingsMenu",showing:!1}},projects:[{title:"dance with the devil in Am",key:void 0,tonality:void 0,accidental:void 0,instrument:void 0,instrumentSound:void 0,instrumentVariant:void 0,theme:void 0,coloredNotes:void 0,tuning:void 0,keyChangeMenu:{showing:!1},fretboardMenu:{showing:!1},settingsMenu:{showing:!1},soundPlayerMenu:{showing:!1}}]};for(let t of e.allNotes)t.selected=!1,t.selectedOnStrings=[],t.highlighted=!1,t.highlightedOnStrings=[],t.appearsOnStrings=[];return e}function Qn(e,t){let s=[];for(let i=0;i<e.length;i++){let o;t?o=X.detect(e,{assumePerfectFifth:!0}):o=X.detect(e,{assumePerfectFifth:!1});for(let l of o)s.push(l)}return[...new Set(s)]}function es(){const e=I(),t=m(c=>c.musicTheory.allNotes),s=m(c=>c.musicTheory.assumePerfectFifth),[n,i]=y.useState([]),[o,l]=y.useState([]);return console.log("chord: "+X.get(["C","E","G"])),y.useEffect(()=>{let c=t.reduce((d,f)=>(f.selected&&!d.includes(f.pc)&&(console.log("pushing: "+f.pc),d.push(f.pc)),d),[]);console.log(c);let u=Qn(c,s);console.log(u),i(u),l(Lt.detect(c)),console.log("effecting")},[t,s]),r.jsxs("div",{id:"ChordScaleIdentifier",children:["there should be 3 tabs: Identify - Chords & Scales - Chord progression",r.jsxs("div",{className:"toolbar",children:[r.jsx("label",{htmlFor:"AssumePerfectFifth",children:"Assume perfect fifth"}),r.jsx("input",{id:"AssumePerfectFifth",type:"checkbox",onChange:()=>e(Ue())})]}),r.jsxs("div",{className:"chords",children:[r.jsxs("div",{className:"chord",children:[r.jsx("p",{children:"Chord:"}),r.jsx("button",{children:n[0]})]}),r.jsxs("div",{className:"possibleChords",children:[r.jsx("p",{children:"Possible Chords:"}),n.map((c,u)=>u===0?null:r.jsx("button",{children:c},c+u))]}),r.jsxs("div",{className:"chordInversions",children:[r.jsx("p",{children:"Inversions:"}),n.map((c,u)=>r.jsx("button",{children:u},"inversion"+u))]})]}),r.jsxs("div",{className:"scales",children:[r.jsxs("div",{className:"scale",children:[r.jsx("p",{children:"Scale:"}),r.jsx("button",{children:o[0]})]}),r.jsxs("div",{className:"possibleScales",children:[r.jsx("p",{children:"Possible Scale:"}),o.map((c,u)=>u===0?null:r.jsx("button",{children:c},c+u))]}),r.jsx("div",{className:"scaleInversions",children:r.jsx("p",{children:"Scale inversions:"})})]})]})}function ts({id:e,title:t,onClose:s,children:n}){const i=y.useCallback(()=>{document.querySelector(".modal").classList.add("fadeOut"),setTimeout(()=>{s()},200)},[s]);return y.useEffect(()=>{let o=document.querySelector(".modal");const l=c=>{c.target.classList.contains("modal")&&i()};return o.addEventListener("click",l),()=>{o.removeEventListener("click",l)}},[i]),r.jsx("div",{id:e,className:"modal",children:r.jsxs("div",{className:"contentWindow",children:[r.jsxs("div",{className:"windowControls",children:[r.jsx("button",{onClick:()=>i(),children:"✓"}),r.jsx("h3",{children:t}),r.jsx("button",{onClick:()=>i(),children:"✖"})]}),r.jsx("div",{className:"content",children:n})]})})}function ns({showing:e}){const t=I(),s=m(d=>d.musicTheory.key),n=m(d=>d.musicTheory.accidental),[i,o]=y.useState(!1);let l=a.get(s.tonic).letter;y.useEffect(()=>{i?s.type==="major"?t(F(w.majorKey(s.tonic).scale)):t(F(w.minorKey(s.tonic).natural.scale)):t(F())},[i,t,s]);function c(d,f){s.type==="major"?t(D(w.majorKey(d+f))):t(D(w.minorKey(d+f))),t(Xe(f)),i&&s.type==="major"?t(F(w.majorKey(d+f).scale)):i&&s.type==="minor"&&t(F(w.minorKey(d+f).natural.scale))}function u(d){d==="major"?(t(D(w.majorKey(s.tonic))),i&&t(F(w.majorKey(s.tonic).scale))):(t(D(w.minorKey(s.tonic))),i&&t(F(w.minorKey(s.tonic).natural.scale)))}return r.jsx(ts,{id:"KeyChangeModal",title:"Key change",showing:e,onClose:()=>t(R("keyChange")),children:r.jsxs("div",{className:"keyChangeSettings",children:[r.jsxs("div",{className:"note-selection",children:[r.jsx("p",{children:"Choose a key"}),r.jsxs("div",{className:"naturals",children:[r.jsx("button",{className:l==="C"?"active":"",onClick:()=>c("C",n),children:"C"}),r.jsx("button",{className:l==="D"?"active":"",onClick:()=>c("D",n),children:"D"}),r.jsx("button",{className:l==="E"?"active":"",onClick:()=>c("E",n),children:"E"}),r.jsx("button",{className:l==="F"?"active":"",onClick:()=>c("F",n),children:"F"}),r.jsx("button",{className:l==="G"?"active":"",onClick:()=>c("G",n),children:"G"}),r.jsx("button",{className:l==="A"?"active":"",onClick:()=>c("A",n),children:"A"}),r.jsx("button",{className:l==="B"?"active":"",onClick:()=>c("B",n),children:"B"})]}),r.jsx("p",{children:"Sharp or flat?"}),r.jsxs("div",{className:"accidentals",children:[r.jsx("button",{className:n==="b"?"active":"",onClick:()=>c(l,"b"),children:l+"♭"}),r.jsx("button",{className:n===""?"active":"",onClick:()=>c(l,""),children:l}),r.jsx("button",{className:n==="#"?"active":"",onClick:()=>c(l,"#"),children:l+"♯"})]}),r.jsx("p",{children:"Major or Minor?"}),r.jsxs("div",{className:"majorMinor",children:[r.jsxs("button",{className:s.type==="major"?"active":"",onClick:()=>u("major"),children:[s.tonic," Major"]}),r.jsxs("button",{className:s.type==="minor"?"active":"",onClick:()=>u("minor"),children:[s.tonic," Minor"]})]})]}),r.jsx("div",{className:"highlightScaleOption",children:r.jsxs("button",{onClick:()=>o(!i),children:[i?"☑":"☐"," Highlight notes in key"]})})]})})}function ss(){const e=I(),t=m(l=>l.ui.currentViewSection1),s=m(l=>l.fretboard.fretboardIsReady),n=m(l=>l.user.loginSuccess),i=m(l=>l.ui.menus);y.useEffect(()=>{if(n)e(ne({}));else{let l=Jn();e(ne(l))}},[e,n]),y.useEffect(()=>{function l(){e(Ye(Je()))}return window.addEventListener("resize",le(l,20)),()=>{window.removeEventListener("resize",le(l,20))}},[e]);function o({view:l}){if(l==="fretboard")return r.jsx(Yn,{});if(l==="piano")return r.jsx(Piano,{});if(l==="instrumentSettings")return r.jsx(InstrumentSettings,{});if(l==="keyChange")return r.jsx(KeyChange,{})}return s?r.jsxs("div",{className:"appLayout",children:[r.jsx(Bn,{}),r.jsx($e,{}),i.keyChange.showing?r.jsx(ns,{}):null,r.jsx(o,{view:t}),r.jsx(es,{})]}):r.jsx(Qe,{})}ss.propTypes={view:O.string};export{ss as default};
