import{R as G,u as Ce,c as ye,g as ne,a as W,j as t,r as p,b as h,s as ie,h as ke,d as re,e as Se,f as le,t as U,n as a,i as Ne,k as Oe,l as w,m as I,o as ae,p as R,q as we,v as $,w as B,x as Te,y as Me,z as Le,A as Ie}from"./index-ca455ec0.js";import Fe from"./Loader-718c1dd0.js";function oe(e=G){const s=e===G?Ce:ye(e);return function(){const{store:i}=s();return i}}const Ae=oe();function Ee(e=G){const s=e===G?Ae:oe(e);return function(){return s().dispatch}}const M=Ee();function $e(e,s){let i=.1+.5*(1-e/s*100/100);var r="";let c=i/100;d(0,0);for(let m=1;m<=99;m++)i-=c,m%2===0?d(m,-i):d(m,i);d(100,0);let u=document.styleSheets[0],o=null;for(let m=0;m<u.cssRules.length;m++)if(u.cssRules[m].name==="dynamicSkew"){o=u.cssRules[m];break}o?o.cssText=`@keyframes stringVibration { ${r} }`:u.insertRule(`@keyframes stringVibration { ${r} }`,u.cssRules.length);function d(m,g){r+=`${m}% {
      transform: skewY(${g}deg);
    }`}}var ce={exports:{}},Ve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",De=Ve,We=De;function ue(){}function de(){}de.resetWarningCache=ue;var Re=function(){function e(i,r,l,c,u,o){if(o!==We){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function s(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:de,resetWarningCache:ue};return n.PropTypes=n,n};ce.exports=Re();var Be=ce.exports;const D=ne(Be);function Pe(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}var me=Pe,Ge=typeof W=="object"&&W&&W.Object===Object&&W,qe=Ge,_e=qe,He=typeof self=="object"&&self&&self.Object===Object&&self,Ke=_e||He||Function("return this")(),he=Ke,Ue=he,Ze=function(){return Ue.Date.now()},Xe=Ze,ze=/\s/;function Qe(e){for(var s=e.length;s--&&ze.test(e.charAt(s)););return s}var Ye=Qe,Je=Ye,et=/^\s+/;function tt(e){return e&&e.slice(0,Je(e)+1).replace(et,"")}var st=tt,nt=he,it=nt.Symbol,fe=it,Z=fe,be=Object.prototype,rt=be.hasOwnProperty,lt=be.toString,V=Z?Z.toStringTag:void 0;function at(e){var s=rt.call(e,V),n=e[V];try{e[V]=void 0;var i=!0}catch{}var r=lt.call(e);return i&&(s?e[V]=n:delete e[V]),r}var ot=at,ct=Object.prototype,ut=ct.toString;function dt(e){return ut.call(e)}var mt=dt,X=fe,ht=ot,ft=mt,bt="[object Null]",gt="[object Undefined]",z=X?X.toStringTag:void 0;function pt(e){return e==null?e===void 0?gt:bt:z&&z in Object(e)?ht(e):ft(e)}var xt=pt;function vt(e){return e!=null&&typeof e=="object"}var jt=vt,Ct=xt,yt=jt,kt="[object Symbol]";function St(e){return typeof e=="symbol"||yt(e)&&Ct(e)==kt}var Nt=St,Ot=st,Q=me,wt=Nt,Y=0/0,Tt=/^[-+]0x[0-9a-f]+$/i,Mt=/^0b[01]+$/i,Lt=/^0o[0-7]+$/i,It=parseInt;function Ft(e){if(typeof e=="number")return e;if(wt(e))return Y;if(Q(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=Q(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=Ot(e);var n=Mt.test(e);return n||Lt.test(e)?It(e.slice(2),n?2:8):Tt.test(e)?Y:+e}var At=Ft,Et=me,q=Xe,J=At,$t="Expected a function",Vt=Math.max,Dt=Math.min;function Wt(e,s,n){var i,r,l,c,u,o,d=0,m=!1,g=!1,f=!0;if(typeof e!="function")throw new TypeError($t);s=J(s)||0,Et(n)&&(m=!!n.leading,g="maxWait"in n,l=g?Vt(J(n.maxWait)||0,s):l,f="trailing"in n?!!n.trailing:f);function x(v){var T=i,E=r;return i=r=void 0,d=v,c=e.apply(E,T),c}function b(v){return d=v,u=setTimeout(S,s),m?x(v):c}function k(v){var T=v-o,E=v-d,K=s-T;return g?Dt(K,l-E):K}function O(v){var T=v-o,E=v-d;return o===void 0||T>=s||T<0||g&&E>=l}function S(){var v=q();if(O(v))return L(v);u=setTimeout(S,k(v))}function L(v){return u=void 0,f&&i?x(v):(i=r=void 0,c)}function C(){u!==void 0&&clearTimeout(u),d=0,i=o=r=u=void 0}function j(){return u===void 0?c:L(q())}function N(){var v=q(),T=O(v);if(i=arguments,r=this,o=v,T){if(u===void 0)return b(o);if(g)return clearTimeout(u),u=setTimeout(S,s),x(o)}return u===void 0&&(u=setTimeout(S,s)),c}return N.cancel=C,N.flush=j,N}var Rt=Wt;const ee=ne(Rt);const Bt=()=>t.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{className:"soundwave-1",d:"M12.0355 8.52113C12.4261 8.1306 13.0674 8.12674 13.3881 8.57637C14.0882 9.55788 14.5 10.7592 14.5 12.0567C14.5 13.3541 14.0882 14.5554 13.3881 15.537C13.0674 15.9866 12.4261 15.9827 12.0355 15.5922C11.645 15.2017 11.6586 14.5725 11.9408 14.0978C12.296 13.5002 12.5 12.8023 12.5 12.0567C12.5 11.3111 12.296 10.6131 11.9408 10.0156C11.6586 9.54084 11.645 8.91165 12.0355 8.52113Z",fill:"#ffffff"}),t.jsx("path",{className:"soundwave-2",d:"M14.864 5.69316C15.2545 5.30263 15.8921 5.29976 16.2419 5.72712C17.6532 7.45118 18.5 9.65526 18.5 12.0571C18.5 14.459 17.6532 16.6631 16.2419 18.3871C15.8921 18.8145 15.2545 18.8116 14.864 18.4211C14.4734 18.0306 14.4792 17.4007 14.8183 16.9648C15.8723 15.6098 16.5 13.9068 16.5 12.0571C16.5 10.2075 15.8723 8.50445 14.8183 7.14944C14.4792 6.71351 14.4734 6.08368 14.864 5.69316Z",fill:"#ffffff"}),t.jsx("path",{className:"soundwave-3",d:"M17.6929 2.79322C18.0835 2.40268 18.7197 2.40049 19.0815 2.81776C21.2113 5.2739 22.5002 8.47903 22.5002 11.9852C22.5002 15.5312 21.1818 18.7693 19.0085 21.2361C18.6434 21.6505 18.0073 21.6433 17.6198 21.2497C17.2324 20.8562 17.2409 20.2256 17.6011 19.8069C19.408 17.7063 20.5002 14.9733 20.5002 11.9852C20.5002 9.03126 19.4329 6.32661 17.6628 4.23586C17.306 3.81436 17.3024 3.18373 17.6929 2.79322Z",fill:"#ffffff"}),t.jsx("path",{className:"speaker",d:"M10 16.5858V7.41421C10 6.52331 8.92286 6.07714 8.29289 6.70711L6.29289 8.70711C6.10536 8.89464 5.851 9 5.58579 9H4C3.44772 9 3 9.44772 3 10V14C3 14.5523 3.44772 15 4 15H5.58579C5.851 15 6.10536 15.1054 6.29289 15.2929L8.29289 17.2929C8.92286 17.9229 10 17.4767 10 16.5858Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"})]}),te=()=>t.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{className:"soundwave-1",d:"M13.0355 8.52113C13.4261 8.1306 14.0674 8.12674 14.3881 8.57637C15.0882 9.55788 15.5 10.7592 15.5 12.0567C15.5 13.3541 15.0882 14.5554 14.3881 15.537C14.0674 15.9866 13.4261 15.9827 13.0355 15.5922C12.645 15.2017 12.6586 14.5725 12.9408 14.0978C13.296 13.5002 13.5 12.8023 13.5 12.0567C13.5 11.3111 13.296 10.6131 12.9408 10.0156C12.6586 9.54084 12.645 8.91165 13.0355 8.52113Z",fill:"#ffffff"}),t.jsx("path",{className:"soundwave-2",d:"M15.864 5.69316C16.2545 5.30263 16.8921 5.29976 17.2419 5.72712C18.6532 7.45118 19.5 9.65526 19.5 12.0571C19.5 14.459 18.6532 16.6631 17.2419 18.3871C16.8921 18.8145 16.2545 18.8116 15.864 18.4211C15.4734 18.0306 15.4792 17.4007 15.8183 16.9648C16.8723 15.6098 17.5 13.9068 17.5 12.0571C17.5 10.2075 16.8723 8.50445 15.8183 7.14944C15.4792 6.71351 15.4734 6.08368 15.864 5.69316Z",fill:"#ffffff"}),t.jsx("path",{className:"speaker",d:"M11 16.5858V7.41421C11 6.52331 9.92286 6.07714 9.29289 6.70711L7.29289 8.70711C7.10536 8.89464 6.851 9 6.58579 9H5C4.44772 9 4 9.44772 4 10V14C4 14.5523 4.44772 15 5 15H6.58579C6.851 15 7.10536 15.1054 7.29289 15.2929L9.29289 17.2929C9.92286 17.9229 11 17.4767 11 16.5858Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"})]}),Pt=()=>t.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{className:"soundwave-1",d:"M15.0355 8.52113C15.4261 8.1306 16.0674 8.12674 16.3881 8.57637C17.0882 9.55788 17.5 10.7592 17.5 12.0567C17.5 13.3541 17.0882 14.5554 16.3881 15.537C16.0674 15.9866 15.4261 15.9827 15.0355 15.5922C14.645 15.2017 14.6586 14.5725 14.9408 14.0978C15.296 13.5002 15.5 12.8023 15.5 12.0567C15.5 11.3111 15.296 10.6131 14.9408 10.0156C14.6586 9.54084 14.645 8.91165 15.0355 8.52113Z",fill:"#ffffff"}),t.jsx("path",{className:"speaker",d:"M13 16.5858V7.41421C13 6.52331 11.9229 6.07714 11.2929 6.70711L9.29289 8.70711C9.10536 8.89464 8.851 9 8.58579 9H7C6.44772 9 6 9.44772 6 10V14C6 14.5523 6.44772 15 7 15H8.58579C8.851 15 9.10536 15.1054 9.29289 15.2929L11.2929 17.2929C11.9229 17.9229 13 17.4767 13 16.5858Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"})]}),Gt=()=>t.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{className:"speaker",d:"M11 16.5858V7.41421C11 6.52331 9.92286 6.07714 9.29289 6.70711L7.29289 8.70711C7.10536 8.89464 6.851 9 6.58579 9H5C4.44772 9 4 9.44772 4 10V14C4 14.5523 4.44772 15 5 15H6.58579C6.851 15 7.10536 15.1054 7.29289 15.2929L9.29289 17.2929C9.92286 17.9229 11 17.4767 11 16.5858Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{className:"soundwave-muted",d:"M20 9.5L15 14.5",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{className:"soundwave-muted",d:"M20 14.5L15 9.5",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"})]}),qt=()=>t.jsxs("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{className:"speaker",d:"M12 16.5858V7.41421C12 6.52331 10.9229 6.07714 10.2929 6.70711L8.29289 8.70711C8.10536 8.89464 7.851 9 7.58579 9H6C5.44772 9 5 9.44772 5 10V14C5 14.5523 5.44772 15 6 15H7.58579C7.851 15 8.10536 15.1054 8.29289 15.2929L10.2929 17.2929C10.9229 17.9229 12 17.4767 12 16.5858Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{className:"soundwave-warning",d:"M16.5361 13.5353V8",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{className:"soundwave-warning",d:"M17.5361 16.598C17.5361 17.1503 17.0884 17.598 16.5361 17.598C15.9838 17.598 15.5361 17.1503 15.5361 16.598C15.5361 16.0457 15.9838 15.598 16.5361 15.598C17.0884 15.598 17.5361 16.0457 17.5361 16.598Z",fill:"#666666"})]}),_t=()=>t.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9.71069 18.2929C10.1012 18.6834 10.7344 18.6834 11.1249 18.2929L16.0123 13.4006C16.7927 12.6195 16.7924 11.3537 16.0117 10.5729L11.1213 5.68254C10.7308 5.29202 10.0976 5.29202 9.70708 5.68254C9.31655 6.07307 9.31655 6.70623 9.70708 7.09676L13.8927 11.2824C14.2833 11.6729 14.2833 12.3061 13.8927 12.6966L9.71069 16.8787C9.32016 17.2692 9.32016 17.9023 9.71069 18.2929Z",fill:"#0F0F0F"})}),Ht=()=>t.jsxs("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M5 12L5 4",stroke:"#222222",strokeLinecap:"round"}),t.jsx("path",{d:"M19 20L19 17",stroke:"#222222",strokeLinecap:"round"}),t.jsx("path",{d:"M5 20L5 16",stroke:"#222222",strokeLinecap:"round"}),t.jsx("path",{d:"M19 13L19 4",stroke:"#222222",strokeLinecap:"round"}),t.jsx("path",{d:"M12 7L12 4",stroke:"#222222",strokeLinecap:"round"}),t.jsx("path",{d:"M12 20L12 11",stroke:"#222222",strokeLinecap:"round"}),t.jsx("circle",{cx:"5",cy:"14",r:"2",stroke:"#222222",strokeLinecap:"round"}),t.jsx("circle",{cx:"12",cy:"9",r:"2",stroke:"#222222",strokeLinecap:"round"}),t.jsx("circle",{cx:"19",cy:"15",r:"2",stroke:"#222222",strokeLinecap:"round"})]});function Kt(){return t.jsx("div",{id:"Spinner"})}function Ut(){const e=p.useRef(null),[s,n]=p.useState(!0),[i,r]=p.useState(qt),[l,c]=p.useState(!1),[u,o]=p.useState(null),[d,m]=p.useState(8),g=h(b=>b.user.soundFile);p.useEffect(()=>{const b=setInterval(()=>{ie.state()==="loaded"&&(n(!1),clearInterval(b),r(te))},50);return()=>{clearInterval(b)}},[g]),p.useEffect(()=>{function b(k){k.target.closest("#VolumeMixer")||c(!1)}return document.addEventListener("click",b),()=>{document.removeEventListener("click",b)}},[]);function f(){if(!s){u&&clearTimeout(u);const b=setTimeout(()=>{c(!1)},3e3);o(b),c(!l)}}function x(){if(!s){u&&clearTimeout(u);let b=parseInt(e.current.value);m(b),b===0&&r(Gt),b>0&&b<=3&&r(Pt),b>3&&b<=7&&r(te),b>7&&b<=10&&r(Bt);let k=b/10;ke.Howler.volume(k);const O=setTimeout(()=>{c(!1)},3e3);o(O)}}return t.jsxs("div",{id:"VolumeMixer",className:`${l?"expanded":""} ${s?"loadingSound":""}`,children:[t.jsxs("button",{className:"volumeButton",onClick:()=>f(),children:[s?t.jsx(Kt,{}):null,i]}),t.jsx("div",{className:"volumeSlider",children:t.jsx("input",{className:"slider",ref:e,type:"range",orient:"vertical",value:d,min:"0",max:"10",onChange:x})})]})}function Zt(){return t.jsx("nav",{id:"Navbar",children:t.jsxs("div",{className:"flex-wrapper",children:[t.jsxs("div",{className:"userSettings",children:[t.jsx("button",{className:"loginBtn",children:"Login"}),t.jsx("button",{className:"projectsBtn",children:"Projects"})]}),t.jsx("div",{className:"wrapper",children:t.jsx(Ut,{})})]})})}function ge(){const e=re.createRef(),s=M(),n=h(l=>l.fretboard.fretCount),i=h(l=>l.fretboard.fretCap);function r(){s(Se(parseInt(e.current.value)))}return t.jsx("input",{id:"fretCount-slider",ref:e,type:"range",value:n,min:"0",max:i,onChange:r})}ge.propTypes={activeView:D.string,setActiveView:D.func};function pe(){const e=M();h(i=>i.ui.currentViewSection1);const s=h(i=>i.musicTheory.key);h(i=>i.ui.menus);const n=h(i=>i.fretboard.fretCount);return t.jsxs("div",{id:"toolbar",children:[t.jsxs("div",{className:"toolbar-item",children:[t.jsx("h4",{children:"Key"}),t.jsxs("button",{className:"keyChangeButton",onClick:()=>e(le("keyChange")),children:[s.tonic," ",s.type==="major"?"Major":"Minor"]})]}),t.jsxs("div",{className:"toolbar-item",children:[t.jsx("h4",{children:"Instrument"}),t.jsx("button",{onClick:()=>e(U("settings")),children:"ðŸ› ï¸"})]}),t.jsxs("div",{className:"toolbar-item",children:[t.jsx("h4",{children:"Menus"}),t.jsx("button",{onClick:()=>e(U("instrument")),children:"ðŸŽ¸"})]}),t.jsxs("div",{className:"toolbar-item",children:[t.jsxs("h4",{children:["Frets: ",n==0?"None":n]}),t.jsx(ge,{})]})]})}pe.propTypes={activeView:D.string,setActiveView:D.func};function Xt(e,s,n,i){let r=n.type==="minor"?n.natural.scale:n.scale;if(s==="note"){for(let l of r)if(a.enharmonic(l)===e)return l.includes("b")?l.replace(/b/g,"â™­"):l.includes("#")?l.replace(/#/g,"â™¯"):l;return i==="b"?a.enharmonic(e).replace(/b/g,"â™­"):e.replace(/#/g,"â™¯")}if(s==="degree"){for(let l=0;l<r.length;l++)if(e===r[l])return l+1}else if(s==="interval"){for(let l=0;l<r.length;l++)if(e===r[l])return n.intervals[l]}else if(s==="doReMi"){for(let l=0;l<r.length;l++)if(e===n.scale[l]){if(l===0)return"Do";if(l===1)return"Re";if(l===2)return"Mi";if(l===3)return"Fa";if(l===4)return"So";if(l===5)return"La";if(l===6)return"Ti"}}return e}const xe=p.memo(function({pitchClass:s,octave:n,noteWidth:i,labelWidth:r,selected:l,highlighted:c,stringNumber:u}){const o=h(f=>f.musicTheory.labelNotes),d=h(f=>f.musicTheory.key),m=h(f=>f.musicTheory.accidental);let g=Xt(s,o,d,m);return t.jsx("button",{className:`note ${l?"selected":""} ${c?"highlighted":""}`,"data-pitchclass":s,"data-octave":n,"data-stringnumber":u,style:{minWidth:i,maxWidth:i},children:t.jsx("span",{style:{minWidth:r,maxWidth:r,minHeight:r,maxHeight:r},children:g})})});function zt({tuning:e,allNotes:s,nutIsFixed:n}){const i=h(l=>l.fretboard.notesLabelWidth),r=h(l=>l.fretboard.fretWidths);return t.jsx("div",{className:`nut ${n?"fixed":""}`,children:e.map((l,c)=>{let u=e.length-c,o=s.filter(g=>g.name===l.name&&g.appearsOnStrings.includes(u))[0],d=r[0],m=o.selectedOnStrings.includes(u);return t.jsx(xe,{pitchClass:o.pc,octave:o.oct,noteWidth:d,labelWidth:i,selected:m,highlighted:o.highlighted,stringNumber:u},`note${o.name}string${u}`)})})}let F=[{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null},{isAnimating:null,timeout:null}];function Qt(e,s,n,i){let r=s;for(let d=0;d<n;d++)r-=i[d];$e(r,s);let l=document.getElementsByClassName("stringVisual")[e],c=l.querySelector(".staticPart"),u=l.querySelector(".vibratingPart");F[e].timeout&&clearTimeout(F[e].timeout),u.classList.remove("animate"),u.offsetWidth,c.style.width=`calc(100% - ${r}px)`,u.style.width=`${r}px`,u.classList.add("animate");const o=[...F];o[e].isAnimating=!0,F=o,F[e].timeout=setTimeout(()=>{const d=[...F];d[e].isAnimating=!1,F=d,u.classList.remove("animate")},3e3)}function Yt(e,s,n){let i,r,l=!1,c,u,o=[],d=document.getElementById("Fretboard"),m=document.getElementById("Strings"),g=document.getElementById("FretVisuals"),f=document.getElementById("StringVisuals");d.addEventListener("mousedown",x),d.addEventListener("touchstart",b);function x(C){o=[];let j;d.classList.contains("nutIsFixed")?(j=m.clientWidth!==m.scrollWidth,o.push(m),o.push(g),o.push(f)):(j=d.clientWidth!==d.scrollWidth,o.push(d)),j&&(document.addEventListener("mousemove",k),document.addEventListener("mouseup",S),i=C.pageX-d.offsetLeft,r=o[0].scrollLeft)}function b(C){o=[];let j;d.classList.contains("nutIsFixed")?(j=m.clientWidth!==m.scrollWidth,o.push(m),o.push(g),o.push(f)):(j=d.clientWidth!==d.scrollWidth,o.push(d)),j&&(document.addEventListener("touchmove",O),document.addEventListener("touchend",L),i=C.touches[0].pageX-d.offsetLeft,r=o[0].scrollLeft)}function k(C){if(C.preventDefault(),c=C.pageX-d.offsetLeft,u=c-i,Math.abs(u)>10&&(n(!0),l=!0),l)for(let N=0;N<o.length;N++)o[N].scrollLeft=r-u}function O(C){if(C.preventDefault(),c=C.touches[0].pageX-d.offsetLeft,u=c-i,Math.abs(u)>10&&(n(!0),l=!0),l)for(let N=0;N<o.length;N++)o[N].scrollLeft=r-u}function S(){if(l){let C=o[0].scrollLeft;for(let j=0;j<o.length;j++)e(s(C));l=!1}document.removeEventListener("mouseup",S),document.removeEventListener("mousemove",k)}function L(){if(l){let C=o[0].scrollLeft;for(let j=0;j<o.length;j++)e(s(C));l=!1}document.removeEventListener("touchEnd",L),document.removeEventListener("touchMove",O)}}function ve(e,s){let n=0;for(let i=0;i<e.length;i++)n+=e[i];return n}function Jt(e,s){return e.filter(i=>i.appearsOnStrings.includes(s))}const es=p.memo(function({notes:s,stringNumber:n}){const i=h(c=>c.fretboard.nutIsFixed),r=h(c=>c.fretboard.notesLabelWidth),l=h(c=>c.fretboard.fretWidths);return t.jsx("div",{className:"string","data-stringnumber":n,children:s.map((c,u)=>{let o=c.selectedOnStrings.includes(n),d=i?l[u+1]:l[u];return t.jsx(xe,{pitchClass:c.pc,octave:c.oct,noteWidth:d,labelWidth:r,selected:o,highlighted:c.highlighted,stringNumber:n},`note${c.name}string${n}`)})})});function ts({tuning:e,nutIsFixed:s,allNotes:n,fretWidths:i,width:r}){return t.jsx("div",{id:"Strings",style:{height:"145px",left:s?i[0]+"px":"auto",right:s?"unset":"auto",overflow:s?"hidden":"visible",maxWidth:s?r:"100%"},children:e.map((l,c)=>{let u=e.length-c,o=Jt(n,u);return s&&(o=o.slice(1)),t.jsx(es,{notes:o,stringNumber:u},`string${u}`)})})}function ss({style:e,theme:s,tuning:n,fretWidths:i,fretboardWidth:r,nutIsFixed:l,width:c}){let u=ve(i);return t.jsxs(t.Fragment,{children:[t.jsx("div",{id:"StringVisuals",style:{width:l?r:u},children:n.map((o,d)=>{let m=n.length-d;return t.jsxs("div",{className:"stringVisual",style:{width:l?u:"auto"},children:[t.jsx("span",{className:"staticPart"}),t.jsx("span",{className:"vibratingPart"})]},`stringVisual${m}`)})}),l?t.jsx("div",{className:"nutVisual",style:{minWidth:i[0]+"px"}}):null,t.jsx("div",{id:"FretVisuals",className:`${l?"nutIsFixed":""}`,style:{left:l?i[0]+"px":"auto",right:l?0:"auto"},children:i.map((o,d)=>d===0&&l?null:t.jsxs("div",{className:!l&&d===0?"fretVisual nutVisual":"fretVisual",style:{minWidth:o,maxWidth:l?c:"auto"},children:[t.jsx("span",{className:"fretband"}),[3,5,7,9,15,17,19,21].includes(d)?t.jsx("span",{className:"fretMarker"}):null,[12,24].includes(d)?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"fretMarker"}),t.jsx("span",{className:"fretMarker"})]}):null,[24].includes(d)?t.jsx("span",{className:"fretband"}):null]},`fretVisual${d}`))})]})}function ns(){const[e,s]=p.useState(!1),n=M(),i=h(f=>f.musicTheory.allNotes),r=h(f=>f.musicTheory.markNotes),l=h(f=>f.fretboard.tuning),c=h(f=>f.fretboard.fretWidths),u=h(f=>f.fretboard.nutIsFixed),o=h(f=>f.fretboard.fretboardWidth),d=h(f=>f.fretboard.fretboardStyle),m=h(f=>f.fretboard.fretboardTheme);p.useEffect(()=>{Yt(n,Ne,s)},[n]);function g(f){if(e)s(!1);else{let x=f.target;if(x.parentNode.classList.contains("note")&&(x=x.parentNode),x.classList.contains("note")){let b=x.parentNode,k=x.getAttribute("data-octave"),O=x.getAttribute("data-pitchclass"),S=parseInt(x.getAttribute("data-stringnumber")),L=l.length-S,C=b.querySelectorAll(".note"),j=Array.from(C).indexOf(x),N=a.get(O+k),v=x.classList.contains("selected");r!=="none"&&n(Oe({note:N,stringNumber:S,wasSelected:v})),ie.playNote(O+k,S);let T=ve(c);Qt(L,T,j,c)}}}return t.jsxs("div",{id:"Fretboard",className:u?"nutIsFixed":"",style:{width:o,height:145},onClick:g,children:[u?t.jsx(zt,{tuning:l,allNotes:i,nutIsFixed:u}):null,t.jsx(ts,{tuning:l,nutIsFixed:u,allNotes:i,fretWidths:c,width:o-c[0]}),t.jsx(ss,{style:d,theme:m,tuning:l,fretWidths:c,fretboardWidth:o,nutIsFixed:u,width:o-c[0]})]})}function is(){let e={username:"Guest",globalSettings:{chordScaleIdentifier:{identify:{chord:!1,scale:!1,displayOnInstrument:!1,highlight:!1}}},key:w.majorKey("C"),scale:"major",tonality:"todo",accidental:"",allNotes:[{...a.get("C0")},{...a.get("C#0")},{...a.get("D0")},{...a.get("D#0")},{...a.get("E0")},{...a.get("F0")},{...a.get("F#0")},{...a.get("G0")},{...a.get("G#0")},{...a.get("A0")},{...a.get("A#0")},{...a.get("B0")},{...a.get("C1")},{...a.get("C#1")},{...a.get("D1")},{...a.get("D#1")},{...a.get("E1")},{...a.get("F1")},{...a.get("F#1")},{...a.get("G1")},{...a.get("G#1")},{...a.get("A1")},{...a.get("A#1")},{...a.get("B1")},{...a.get("C2")},{...a.get("C#2")},{...a.get("D2")},{...a.get("D#2")},{...a.get("E2")},{...a.get("F2")},{...a.get("F#2")},{...a.get("G2")},{...a.get("G#2")},{...a.get("A2")},{...a.get("A#2")},{...a.get("B2")},{...a.get("C3")},{...a.get("C#3")},{...a.get("D3")},{...a.get("D#3")},{...a.get("E3")},{...a.get("F3")},{...a.get("F#3")},{...a.get("G3")},{...a.get("G#3")},{...a.get("A3")},{...a.get("A#3")},{...a.get("B3")},{...a.get("C4")},{...a.get("C#4")},{...a.get("D4")},{...a.get("D#4")},{...a.get("E4")},{...a.get("F4")},{...a.get("F#4")},{...a.get("G4")},{...a.get("G#4")},{...a.get("A4")},{...a.get("A#4")},{...a.get("B4")},{...a.get("C5")},{...a.get("C#5")},{...a.get("D5")},{...a.get("D#5")},{...a.get("E5")},{...a.get("F5")},{...a.get("F#5")},{...a.get("G5")},{...a.get("G#5")},{...a.get("A5")},{...a.get("A#5")},{...a.get("B5")},{...a.get("C6")},{...a.get("C#6")},{...a.get("D6")},{...a.get("D#6")},{...a.get("E6")},{...a.get("F6")},{...a.get("F#6")},{...a.get("G6")},{...a.get("G#6")},{...a.get("A6")},{...a.get("A#6")},{...a.get("B6")},{...a.get("C7")},{...a.get("C#7")},{...a.get("D7")},{...a.get("D#7")},{...a.get("E7")},{...a.get("F7")},{...a.get("F#7")},{...a.get("G7")},{...a.get("G#7")},{...a.get("A7")},{...a.get("A#7")},{...a.get("B7")},{...a.get("C8")},{...a.get("C#8")},{...a.get("D8")},{...a.get("D#8")},{...a.get("E8")},{...a.get("F8")},{...a.get("F#8")},{...a.get("G8")},{...a.get("G#8")},{...a.get("A8")},{...a.get("A#8")},{...a.get("B8")}],nutIsFixed:!1,soundFile:"jazzBass.mp3",instrumentStyle:"default",instrumentTheme:"default",coloredNotes:!1,tuning:[a.get("G2"),a.get("D2"),a.get("A1"),a.get("E1")],markNotes:"single",labelNotes:"note",fretPosition:"all",highlightNotes:void 0,assumePerfectFifth:!1,menus:{instrument:{id:"InstrumentMenu",showing:!1},settings:{id:"SettingsMenu",showing:!1}},instrumentView:{activeInstrument:"fretboard",fretboard:{settings:{enableFretNumbers:!1,enableFretMarkers:!1}},piano:{settings:{test:!1}}},tabMenuSettings:{activeTab:"Identify",tabs:{chordScaleIdentifier:{settings:{chord:!1,scale:!1,displayOnInstrument:!1,highlight:!1,showChordsDeviatingByNotes:0}},chordScaleDictionary:{settings:{test:!1}},progression:{settings:{test:!1}}}},projects:[{title:"dance with the devil in Am",key:void 0,tonality:void 0,accidental:void 0,instrument:void 0,instrumentSound:void 0,instrumentVariant:void 0,theme:void 0,coloredNotes:void 0,tuning:void 0,keyChangeMenu:{showing:!1},fretboardMenu:{showing:!1},settingsMenu:{showing:!1},soundPlayerMenu:{showing:!1},chordScaleIdentifierMenu:{identify:{chords:{showNotes:!0,filterByMatchingNotes:"all"},scales:{}},dictionary:{},progression:{}}}]};for(let s of e.allNotes)s.selected=!1,s.selectedOnStrings=[],s.highlighted=!1,s.highlightedOnStrings=[],s.appearsOnStrings=[];return e}function je({id:e,title:s,onClose:n,children:i}){const r=p.useCallback(()=>{document.querySelector(".modal").classList.add("fadeOut"),setTimeout(()=>{n()},200)},[n]);return p.useEffect(()=>{let l=document.querySelector(".modal");const c=u=>{u.target.classList.contains("modal")&&r()};return l.addEventListener("click",c),()=>{l.removeEventListener("click",c)}},[r]),t.jsx("div",{id:e,className:"modal",children:t.jsxs("div",{className:"contentWindow",children:[t.jsxs("div",{className:"windowHeader",children:[t.jsx("button",{onClick:()=>r(),children:"âœ“"}),t.jsx("h4",{children:s}),t.jsx("button",{onClick:()=>r(),children:"âœ–"})]}),t.jsx("div",{className:"content",children:i})]})})}function rs(){const e=M(),s=h(o=>o.musicTheory.key),n=h(o=>o.musicTheory.accidental),[i,r]=p.useState(!1);let l=a.get(s.tonic).letter;p.useEffect(()=>{i?s.type==="major"?e(I(w.majorKey(s.tonic).scale)):e(I(w.minorKey(s.tonic).natural.scale)):e(I())},[i,e,s]);function c(o,d){s.type==="major"?e(R(w.majorKey(o+d))):e(R(w.minorKey(o+d))),e(we(d)),i&&s.type==="major"?e(I(w.majorKey(o+d).scale)):i&&s.type==="minor"&&e(I(w.minorKey(o+d).natural.scale))}function u(o){o==="major"?(e(R(w.majorKey(s.tonic))),i&&e(I(w.majorKey(s.tonic).scale))):(e(R(w.minorKey(s.tonic))),i&&e(I(w.minorKey(s.tonic).natural.scale)))}return t.jsxs(je,{id:"KeyChangeModal",title:"Key change",onClose:()=>e(ae()),children:[t.jsxs("div",{className:"note-selection",children:[t.jsx("p",{children:"Choose a key"}),t.jsxs("div",{className:"naturals",children:[t.jsx("button",{className:l==="C"?"active":"",onClick:()=>c("C",n),children:"C"}),t.jsx("button",{className:l==="D"?"active":"",onClick:()=>c("D",n),children:"D"}),t.jsx("button",{className:l==="E"?"active":"",onClick:()=>c("E",n),children:"E"}),t.jsx("button",{className:l==="F"?"active":"",onClick:()=>c("F",n),children:"F"}),t.jsx("button",{className:l==="G"?"active":"",onClick:()=>c("G",n),children:"G"}),t.jsx("button",{className:l==="A"?"active":"",onClick:()=>c("A",n),children:"A"}),t.jsx("button",{className:l==="B"?"active":"",onClick:()=>c("B",n),children:"B"})]}),t.jsx("p",{children:"Sharp or flat?"}),t.jsxs("div",{className:"accidentals",children:[t.jsx("button",{className:n==="b"?"active":"",onClick:()=>c(l,"b"),children:l+"â™­"}),t.jsx("button",{className:n===""?"active":"",onClick:()=>c(l,""),children:l}),t.jsx("button",{className:n==="#"?"active":"",onClick:()=>c(l,"#"),children:l+"â™¯"})]}),t.jsx("p",{children:"Major or Minor?"}),t.jsxs("div",{className:"majorMinor",children:[t.jsxs("button",{className:s.type==="major"?"active":"",onClick:()=>u("major"),children:[s.tonic," Major"]}),t.jsxs("button",{className:s.type==="minor"?"active":"",onClick:()=>u("minor"),children:[s.tonic," Minor"]})]})]}),t.jsx("div",{className:"highlightScaleOption",children:t.jsxs("button",{onClick:()=>r(!i),children:[i?"â˜‘":"â˜"," Highlight notes in key"]})})]})}function ls({tabs:e}){const s=h(r=>r.ui.tabMenuSettings),[n,i]=p.useState(s.activeTab);return t.jsxs("div",{id:"TabMenu",children:[t.jsx("div",{className:"tabs",children:e.map(r=>t.jsx("div",{className:`tab ${n===r.tabTitle?"active":""}`,onClick:()=>i(r.tabTitle),children:r.tabTitle},"tab_"+r.tabTitle))}),t.jsx("div",{className:"tab-content",children:e.map(r=>n===r.tabTitle?t.jsx(re.Fragment,{children:r.tabContent},"tabContent_"+r.tabTitle):null)})]})}function as(e){let s=[];return s=e.reduce((n,i)=>(i.selected&&!n.includes(i.pc)&&n.push(i.pc),n),[]),s}function os({title:e,settingsModal:s,children:n}){const i=M(),[r,l]=p.useState(!1),[c,u]=p.useState(_t),o=p.useRef(null);function d(m){console.log(m.target),m.target.closest(".settingsButton")?i(le(s)):l(!r)}return t.jsxs("div",{className:`collapsible ${r?"open":"closed"}`,children:[t.jsxs("div",{className:"collapsibleHeader",onClick:m=>d(m),children:[c,t.jsx("p",{className:"title",children:e}),s&&t.jsx("button",{className:"settingsButton",children:t.jsx(Ht,{})})]}),t.jsx("div",{ref:o,className:"content",children:n})]})}let P;const cs=new Uint8Array(16);function us(){if(!P&&(P=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(cs)}const y=[];for(let e=0;e<256;++e)y.push((e+256).toString(16).slice(1));function ds(e,s=0){return y[e[s+0]]+y[e[s+1]]+y[e[s+2]]+y[e[s+3]]+"-"+y[e[s+4]]+y[e[s+5]]+"-"+y[e[s+6]]+y[e[s+7]]+"-"+y[e[s+8]]+y[e[s+9]]+"-"+y[e[s+10]]+y[e[s+11]]+y[e[s+12]]+y[e[s+13]]+y[e[s+14]]+y[e[s+15]]}const ms=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),se={randomUUID:ms};function H(e,s,n){if(se.randomUUID&&!s&&!e)return se.randomUUID();e=e||{};const i=e.random||(e.rng||us)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,s){n=n||0;for(let r=0;r<16;++r)s[n+r]=i[r];return s}return ds(i)}function hs({intervals:e,missingChordIntervals:s,simplified:n,canChangeChord:i}){const[r,l]=p.useState(n);function c(o,d){if(r&&!o)return null;{const m=i?()=>(o.number,void 0):void 0;return t.jsx("button",{className:`intervalButton ${s.includes(o.number)?"missing":""}`,onClick:m,children:o.number},H())}}function u(o){}return t.jsxs("div",{className:`intervals  ${r?"simplified":""}`,children:[t.jsx("div",{className:"row",children:e.slice(0,12).map((o,d)=>c(o))}),t.jsx("div",{className:"row",children:e.includes("has intervals bigger than 7")&&e.slice(12).map((o,d)=>c(o))})]})}function fs({chord:e,showNotes:s,showIntervals:n,intervalSettings:i}){return t.jsxs("div",{className:`chordDetails ${e.isExactMatch?"exactMatch":""}`,children:[t.jsxs("p",{className:"chordSymbol",children:[e.root+e.quality,t.jsx("span",{children:e.extension}),e.suspension&&t.jsx("span",{className:"suspension",children:e.suspension}),e.alteration&&t.jsxs("span",{className:"alteration",children:["(",e.alteration,")"]})]}),t.jsxs("div",{className:"chordNotes",children:["(",e.notes.map((r,l)=>l!==e.notes.length-1?t.jsxs("p",{children:[r,t.jsx("span",{children:",Â "})]},H()):t.jsx("p",{children:r},H())),")"]}),t.jsx(hs,{intervals:e.intervals,missingChordIntervals:e.missingChordIntervals})]})}const A={notes:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],similarIntervals:{1:[1,2],2:[1,2],3:[3,4],4:[3,4],5:[],6:[6,7,8],7:[6,7,8],8:[6,7,8],9:[],10:[10,11],11:[10,11]},chordQualities:{default:[{extension:7,intervals:[{number:0,isOmittable:!1},{number:4,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:9,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!1},{number:4,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:11,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!1},{number:5,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:13,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!0},{number:5,isOmittable:!1},{number:7,isOmittable:!0},{number:9,isOmittable:!1},{number:10,isOmittable:!1}]}],major:[{extension:5,intervals:[{number:0,isOmittable:!1},{number:7,isOmittable:!1}]},{extension:null,intervals:[{number:0,isOmittable:!1},{number:4,isOmittable:!1},{number:7,isOmittable:!0}]},{extension:7,intervals:[{number:0,isOmittable:!1},{number:4,isOmittable:!1},{number:7,isOmittable:!0},{number:11,isOmittable:!1}]},{extension:9,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!1},{number:4,isOmittable:!1},{number:7,isOmittable:!0},{number:11,isOmittable:!1}]},{extension:11,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!1},{number:5,isOmittable:!1},{number:7,isOmittable:!0},{number:11,isOmittable:!1}]},{extension:13,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!1},{number:5,isOmittable:!0},{number:7,isOmittable:!0},{number:9,isOmittable:!1},{number:11,isOmittable:!1}]}],minor:[{extension:null,intervals:[{number:0,isOmittable:!1},{number:3,isOmittable:!1},{number:7,isOmittable:!0}]},{extension:7,intervals:[{number:0,isOmittable:!1},{number:3,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:9,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!1},{number:3,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:11,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:3,isOmittable:!1},{number:5,isOmittable:!1},{number:7,isOmittable:!0},{number:10,isOmittable:!1}]},{extension:13,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:3,isOmittable:!1},{number:5,isOmittable:!0},{number:7,isOmittable:!0},{number:9,isOmittable:!1},{number:10,isOmittable:!1}]}],diminished:[{extension:null,intervals:[{number:0,isOmittable:!1},{number:3,isOmittable:!1},{number:6,isOmittable:!1}]},{extension:7,intervals:[{number:0,isOmittable:!1},{number:3,isOmittable:!1},{number:6,isOmittable:!1},{number:9,isOmittable:!1}]},{extension:9,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!1},{number:3,isOmittable:!1},{number:6,isOmittable:!1},{number:9,isOmittable:!1}]},{extension:11,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:3,isOmittable:!1},{number:5,isOmittable:!1},{number:6,isOmittable:!1},{number:9,isOmittable:!1}]}],augmented:[{extension:null,intervals:[{number:0,isOmittable:!1},{number:4,isOmittable:!1},{number:8,isOmittable:!1}]},{extension:7,intervals:[{number:0,isOmittable:!1},{number:4,isOmittable:!1},{number:8,isOmittable:!1},{number:10,isOmittable:!1}]},{extension:9,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!1},{number:4,isOmittable:!1},{number:8,isOmittable:!1},{number:10,isOmittable:!1}]},{extension:11,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!1},{number:5,isOmittable:!1},{number:8,isOmittable:!1},{number:10,isOmittable:!1}]},{extension:13,intervals:[{number:0,isOmittable:!1},{number:2,isOmittable:!0},{number:4,isOmittable:!1},{number:5,isOmittable:!0},{number:8,isOmittable:!1},{number:9,isOmittable:!1},{number:10,isOmittable:!1}]}]}};class _{constructor({root:s="",quality:n="",extension:i="",additionalQuality:r="",suspension:l="",alteration:c="",alterations:u=[],symbol:o="",notes:d=[],intervals:m=[],extensions:g=[],modifications:f=[],missingIntervals:x=[],missingChordIntervals:b=[],isAbstract:k=!1,isValid:O=!0,isExactMatch:S=!1}={}){this.root=s,this.quality=n,this.extension=i,this.additionalQuality=r,this.suspension=l,this.alteration=c,this.alterations=u,this.symbol=o,this.notes=d,this.intervals=m,this.extensions=g,this.modifications=f,this.missingIntervals=x,this.missingChordIntervals=b,this.isAbstract=k,this.isValid=O,this.isExactMatch=S}generateNotes(){let s=[],n=A.notes.indexOf(this.root);for(let i=0;i<this.intervals.length;i++){let r=this.intervals[i].number+n;for(;r>=12;)r-=12;s.push(A.notes[r])}return s}intervalsMatchExactly(s){return this.intervals.length===s.length&&this.intervals.every(n=>s.includes(n.number))}extendOrAlter(s){if(this.extension===5){this.isValid=!1;return}let n="";switch(s){case 1:this.extension>=9?n="discard":(this.alterations.push("b9"),n="add");break;case 2:(this.quality==="major"||this.quality==="default")&&(this.missingChordIntervals.includes(4)?(this.suspension="sus2",n="replaceThird"):this.extension===null?(this.alterations.push("9"),n="add"):n="discard");break;case 3:this.extension>=9?n="discard":(this.alterations.push("#9"),n="add");break;case 4:(this.quality==="minor"||this.quality==="diminished")&&(n="discard");break;case 5:(this.quality==="major"||this.quality==="default")&&(this.suspension==="sus2"?(this.suspension="sus4",this.alterations.push("9"),n="add"):this.missingIntervals.includes(4)?(this.suspension="sus4",n="replaceThird"):this.extension===null||this.extension===7?(this.alterations.push("11"),n="add"):n="discard");break;case 6:this.canModifySimilar(s)?(this.alterations.push("b5"),n="replace"):this.extension>=11?n="discard":(this.alterations.push("#11"),n="add");break;case 7:n="discard";break;case 8:this.canModifySimilar(s)?(this.alterations.push("#5"),n="replace"):this.extension===13?n="discard":(this.alterations.push("b13"),n="add");break;case 9:this.quality==="diminished"||this.extension>=7?n="discard":(this.extension=6,n="add");break;case 10:this.extension>=7||this.quality==="major"&&this.extension===null?n="discard":(this.alterations.push("b7"),n="add");break;case 11:this.quality==="major"&&this.extension===null?n="discard":this.quality==="minor"&&(this.quality="mMaj7",n="add");break}switch(n){case"add":this.intervals.push({number:s,isOmittable:!1});break;case"replace":this.intervals=this.intervals.filter(i=>!A.similarIntervals[s].includes(i.number));break;case"replaceThird":this.intervals.push({number:s,isOmittable:!1}),this.intervals=this.intervals.filter(i=>i.number!==4);break;case"discard":this.isValid=!1;break}}canModifySimilar(s){return this.intervals.some(n=>A.similarIntervals[s].includes(n.number)&&n.isOmittable)}hasSimilarInterval(s){switch(s){case 1:case 2:return this.hasSecond();case 3:case 4:return this.hasThird();case 5:return this.hasFourth();case 6:case 7:case 8:return this.hasFifth();case 9:return this.hasSixth();case 10:case 11:return this.hasSeventh();default:return!1}}getMissingIntervalsFromSelected(s){let n=[],i=this.intervals.map(r=>r.number);for(let r of s)i.includes(r)||n.push(r);return this.missingFromSelected=n,n}getMissingChordIntervals(s){let n=[];for(let i of this.intervals)s.includes(i.number)||n.push(i.number);return this.missingChordIntervals=n,n}checkForNo3AndNo5(s){switch(this.quality){case"default":case"major":console.log("setting no3 or no5"),s===4&&(this.no3=!0),s===7&&(this.no5=!0);break;case"minor":console.log("setting no3 or no5"),s===3&&(this.no3=!0),s===7&&(this.no5=!0);break;case"diminished":console.log("setting no3 or no5"),s===3&&(this.no3=!0);break;case"augmented":console.log("setting no3 or no5"),s===4&&(this.no3=!0);break}}prepareForUse(){switch(this.quality){case"default":this.quality="";break;case"major":this.extension===5||this.extension===6||this.extension===null?this.quality="":this.quality="maj";break;case"minor":this.quality="min";break;case"diminished":this.quality="dim";break;case"augmented":this.quality="aug";break}this.no3&&this.alterations.push("no3"),this.no5&&this.alterations.push("no5"),this.alteration=this.alterations.toString(),this.notes.length===0&&(this.notes=this.generateNotes())}isAug(){return this.intervals.includes(8)}isDim(){return this.intervals.includes(6)}hasSecond(){return this.intervals.includes(1)||this.intervals.includes(2)}hasThird(){return this.intervals.includes(3)||this.intervals.includes(4)}hasFourth(){return this.intervals.includes(5)}hasFifth(){return this.intervals.includes(6)||this.intervals.includes(7)||this.intervals.includes(8)}hasSixth(){return this.intervals.includes(9)}hasSeventh(){return this.intervals.includes(10)||this.intervals.includes(11)}removeFifths(s){s?this.intervals.splice(this.intervals.indexOf(s),1):this.intervals=this.intervals.filter(n=>n<6||n>8)}alterFifthTo(s){let n=this.getFifths();n.length===1&&(this.intervals.splice(this.intervals.indexOf(n[0]),1),this.intervals.push(s))}addExtension(s){}getFifths(){return this.intervals.filter(s=>s===6||s===7||s===8)}}function bs(e,s){console.log("getChord()"),console.log("selectedNotes: "+e);const n=[];let i=A.chordQualities;if(e.length===0)return[new _({root:"N.C. (no chord)"})];if(e.length===1)return[new _({root:e[0],quality:"major",notes:[e[0]],intervals:[0]})];let r=gs(e),l=e[0];for(let c in i)for(let u of i[c]){const o=c,d=u.extension,m=u.intervals.slice();let g=new _({root:l,quality:o,extension:d,intervals:m});c==="major"&&u.extension===null&&(console.log("usinge chord prototype to generate a possible chord: "),console.log(u),console.log(g));let f=g.getMissingIntervalsFromSelected(r),x=g.getMissingChordIntervals(r);for(let b of f)g.extendOrAlter(b);for(let b of x)g.checkForNo3AndNo5(b);g.isValid&&n.push(g)}for(let c of n)c.prepareForUse(),c.intervalsMatchExactly(r)&&(c.isExactMatch=!0);return n.sort((c,u)=>c.intervals.length-r.length-(u.intervals.length-r.length)),n}function gs(e){let s=[],n,i,r=A.notes.indexOf(e[0]);for(let l=0;l<e.length;l++){for(i=A.notes.indexOf(e[l])-r;i<n;)i+=12;n=i,i>12&&(i-=12),s.includes(i)||s.push(i)}return s=s.sort((l,c)=>l-c),s}function ps(){const[e,s]=p.useState(["chord"]),n=h(c=>c.musicTheory.allNotes);h(c=>c.user.globalSettings.chordScaleIdentifier.identify);let i=as(n),r=bs(i);console.log(r),e.includes("chord");function l(c){if(e.includes(c)){let u=e.filter(o=>o!==c);s(u)}else s([...e,c])}return t.jsxs("div",{id:"ChordScaleIdentifier",children:[t.jsxs("div",{className:"settingsBar",children:[t.jsxs("button",{onClick:()=>l("chord"),children:[e.includes("chord")?"â˜‘":"â˜"," Chord"]}),t.jsxs("button",{onClick:()=>l("scale"),children:[e.includes("scale")?"â˜‘":"â˜"," Scale"]})]}),t.jsxs("div",{className:"content",children:[i,e.includes("chord")&&t.jsx(t.Fragment,{children:t.jsx(os,{title:"Chord",settingsModal:"identifyChordFilters",children:r.map((c,u)=>t.jsx(fs,{chord:c},c.symbol+u))})}),e.includes("scale")&&t.jsx(t.Fragment,{children:t.jsx("p",{children:"Scales"})})]})]})}function xs(){return t.jsx("div",{id:"ChordScaleDictionary",children:"ChordScaleDictionary"})}function vs(){return t.jsx("div",{id:"ChordProgressionMaker",children:"ChordProgressionMaker"})}function js(e){e.style.maxHeight=null}function Cs(e){e.style.maxHeight=e.scrollHeight+"px"}function ys({showing:e}){const s=M(),n=h(o=>o.musicTheory.markNotes),i=h(o=>o.musicTheory.labelNotes),r=h(o=>o.musicTheory.fretPosition),l=h(o=>o.musicTheory.highlightNotes),c=h(o=>o.fretboard.nutIsFixed);p.useEffect(()=>{let o=document.getElementById("InstrumentMenu");e?Cs(o):js(o)},[e]);function u(){s(Te(!c))}return t.jsxs("div",{id:"InstrumentMenu",children:[t.jsxs("div",{className:"settings",children:[t.jsxs("div",{className:"setting dropdown markNotes",children:[t.jsx("p",{children:"Mark notes"}),t.jsx("button",{children:n}),t.jsxs("div",{className:"dropdown-content",children:[t.jsx("button",{onClick:()=>s($("single")),children:"Single"}),t.jsx("button",{onClick:()=>s($("none")),children:"None"}),t.jsx("button",{onClick:()=>s($("all")),children:"All"}),t.jsx("button",{onClick:()=>s($("identical")),children:"Identical"}),t.jsx("button",{onClick:()=>s($("onePerString")),children:"One per string"})]})]}),t.jsxs("div",{className:"setting dropdown labelNotes",children:[t.jsx("p",{children:"Label notes"}),t.jsx("button",{children:i}),t.jsxs("div",{className:"dropdown-content",children:[t.jsx("button",{onClick:()=>s(B("note")),children:"Note"}),t.jsx("button",{onClick:()=>s(B("interval")),children:"Interval"}),t.jsx("button",{onClick:()=>s(B("degree")),children:"Degree"}),t.jsx("button",{onClick:()=>s(B("doReMi")),children:"DoReMi"})]})]}),t.jsxs("div",{className:"setting dropdown fretPositions",children:[t.jsx("p",{children:"Position"}),t.jsx("button",{children:r}),t.jsxs("div",{className:"dropdown-content",children:[t.jsx("button",{children:"All"}),t.jsx("button",{children:"1"}),t.jsx("button",{children:"2"}),t.jsx("button",{children:"3"}),t.jsx("button",{children:"4"}),t.jsx("button",{children:"5"})]})]}),t.jsxs("div",{className:"setting dropdown highlight",children:[t.jsx("p",{children:"Highlight"}),t.jsx("button",{children:l}),t.jsxs("div",{className:"dropdown-content highlight",children:[t.jsx("button",{children:"All"}),t.jsx("button",{children:"None"}),t.jsx("button",{onClick:()=>s,children:"Scale"})]})]}),t.jsxs("div",{className:"setting dropdown clear",children:[t.jsx("p",{children:"Clear"}),t.jsx("button",{children:"All"}),t.jsxs("div",{className:"dropdown-content clear",children:[t.jsx("button",{onClick:()=>s(deselectNotes("all")),children:"All"}),t.jsx("button",{onClick:()=>s(deselectNotes("marked")),children:"Marked"}),t.jsx("button",{onClick:()=>s(deselectNotes("highlighted")),children:"Highlighted"})]})]}),t.jsxs("div",{className:"setting dropdown fixNut",children:[t.jsx("p",{children:"Fixed nut"}),t.jsx("button",{className:c?"nutFixedButton active":"nutFixedButton",onClick:()=>u(),children:c?"Fixed":"Normal"})]})]}),t.jsx("button",{className:"closeButton",children:"ðŸŽµ"})]})}function ks(){const e=M();return t.jsx(je,{id:"IdentifierChordFiltersModal",title:"Chord layout",onClose:()=>e(ae()),children:t.jsxs("div",{className:"identifierChordFilters",children:[t.jsx("p",{children:"â–¡ Show notes"}),t.jsx("p",{children:"â–¡ Only show exact chords"}),t.jsx("p",{children:"â–¡ Show chords that are 1 note off"}),t.jsx("p",{children:"â–¡ Show chords that are 2 note off"}),t.jsx("p",{children:"â–¡ Show all possible chords, closest first"}),"-Intervals on/off + intervals style -Notes in chord -Aliases"]})})}function Ss(){const e=h(s=>s.ui.activeModal);return e==="keyChange"?t.jsx(rs,{}):e==="identifyChordFilters"?t.jsx(ks,{}):null}function Ns(){const e=M(),s=h(r=>r.fretboard.fretboardIsReady),n=h(r=>r.ui.instrumentView);h(r=>r.ui.menus);const i=[{tabTitle:"Identify",tabContent:t.jsx(ps,{})},{tabTitle:"Dictionary",tabContent:t.jsx(xs,{})},{tabTitle:"Progression",tabContent:t.jsx(vs,{})}];return p.useEffect(()=>{let r=is();e(Me(r))},[e]),p.useEffect(()=>{function r(){e(Le(Ie()))}return window.addEventListener("resize",ee(r,20)),()=>{window.removeEventListener("resize",ee(r,20))}},[e]),s?t.jsxs("div",{className:"appLayout",children:[t.jsx(Zt,{}),t.jsx(pe,{}),t.jsx(Ss,{}),t.jsx(ys,{showing:!0}),n.activeInstrument==="fretboard"?t.jsx(ns,{}):null,t.jsx(ls,{tabs:i})]}):t.jsx(Fe,{})}Ns.propTypes={view:D.string};export{Ns as default};
